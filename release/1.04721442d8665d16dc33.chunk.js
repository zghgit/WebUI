webpackJsonp([1],{"1mi0":function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,l.a,l.b)),i["ɵdid"](114688,null,0,o.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"merchant-detail",[],null,null,null,a,m)),i["ɵdid"](114688,null,0,u.a,[c.a,s.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("DhbZ"),o=n("OkKd"),u=n("iZ1U"),c=n("0kYB"),s=n("U9zq"),p=n("BkNc");n.d(t,"a",function(){return _});var d=[],m=i["ɵcrt"]({encapsulation:2,styles:d,data:{}}),_=i["ɵccf"]("merchant-detail",u.a,r,{},{},[])},"2U2Y":function(e,t,n){"use strict";var a=n("IekC"),r=n("BkNc");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_sub_user_list",{params:e}).subscribe(function(n){if(n.status){var a=n.data,r=a.list;t.plugins.grid.pagination.totalItems=a.total_num,t.plugins.grid.tbody=[];for(var i=0,l=r;i<l.length;i++){var o=l[i],u=void 0;u=[{content:o.user_id,hidden:!0},{content:o.user_name},{content:o.parent_name},{content:1==o.user_type?"主账户":"子账户"},{content:1==o.status?"启用":"禁用"},{content:o.mobile_no}];var c=[];t.uc.powerfun(t.uc.constant.get_sub_user)&&o.operation.indexOf(t.uc.powercontroll.read)>=0&&c.push({content:"查看",class:"btn-info",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/allChildAccountDetail",n])}}),t.uc.powerfun(t.uc.constant.update_sub_user)&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"编辑",class:"btn-primary",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/allChildAccountEdit",n])}}),t.uc.powerfun(t.uc.constant.disable_user)&&"1"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"禁用",class:"btn-black",click:function(n){var a=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_user)&&"2"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"启用",class:"btn-success",click:function(n){var a=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取子账户信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.plugins.grid={th:[{content:"账户ID",hidden:!0},{content:"账户名称"},{content:"上级"},{content:"账户类型"},{content:"启用状态"},{content:"手机号码"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1,totalItems:1}},this.activatedRoute.params.subscribe(function(t){localStorage.setItem("currentLowerId",t.id),e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{parent_id:t.id}})})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.ctorParameters=function(){return[{type:a.b},{type:a.a},{type:r.c},{type:a.c},{type:r.a}]},e}()},"2ymR":function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.agent_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_agent_user/",{params:{agent_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,c=[],s=0,p=i;s<p.length;s++){for(var d=p[s],m=!1,_=0,y=r;_<y.length;_++)if(y[_].module_name==d.module_name)var m=!0;c.push({checked:m,value:d.module_name,content:d.content})}e.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:e.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:e.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:n.province_code,placeholder:"--请选择省--"},city:{name:"city_code",value:n.city_code,placeholder:"--请选择市--"},area:{name:"district_code",value:n.district_code,placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_11",controlType:"input",inputType:"text",value:n.certificate_1,placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_11",controlType:"file",fileType:"img",value:n.certificate_img_1,config:{value:n.certificate_img_1,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_11"}},{label:"税务登记证-登记号",key:"certificate_12",controlType:"input",inputType:"text",value:n.certificate_2,placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_12",controlType:"file",fileType:"img",value:n.certificate_img_2,config:{value:n.certificate_img_2,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_12"}},{label:"组织结构代码",key:"certificate_13",controlType:"input",inputType:"text",value:n.certificate_3,placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_13",controlType:"file",fileType:"img",value:n.certificate_img_3,config:{value:n.certificate_img_3,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_13"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:n.enterprise_nature,require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:n.min_withdraw_cash,require:!0,placeholder:"请输入提现额度",validator:[a.Validators.required,a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,e.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+e.uc.reg.MAX_NUMBER+")"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:c,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}else swal({title:"获取代理商信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{agent_id:this.agent_id,agent_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_11,certificate_img_1:n.certificate_img_11,certificate_2:n.certificate_12,certificate_img_2:n.certificate_img_12,certificate_3:n.certificate_13,certificate_img_3:n.certificate_img_13,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:"",module_permission:JSON.parse(n.module_permission).join(",")}}};this.appHttpService.postData(this.uc.api.qc+"/update_agent_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/agentAccountList"):swal("编辑代理商失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:i.c},{type:r.a}]},e}()},"3Whe":function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.city_partner_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_city_partner_user/",{params:{city_partner_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,c=[],s=0,p=i;s<p.length;s++){for(var d=p[s],m=!1,_=0,y=r;_<y.length;_++)if(y[_].module_name==d.module_name)var m=!0;c.push({checked:m,value:d.module_name,content:d.content})}e.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:e.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱地址",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:e.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:n.province_code,placeholder:"--请选择省--"},city:{name:"city_code",value:n.city_code,placeholder:"--请选择市--"},area:{name:"district_code",value:n.district_code,placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_21",controlType:"input",inputType:"text",value:n.certificate_1,placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_21",controlType:"file",fileType:"img",value:n.certificate_img_1,config:{value:n.certificate_img_1,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_21"}},{label:"税务登记证-登记号",key:"certificate_22",controlType:"input",inputType:"text",value:n.certificate_2,placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_22",controlType:"file",fileType:"img",value:n.certificate_img_2,config:{value:n.certificate_img_2,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_22"}},{label:"组织结构代码",key:"certificate_23",controlType:"input",inputType:"text",value:n.certificate_3,placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_23",controlType:"file",fileType:"img",value:n.certificate_img_3,config:{value:n.certificate_img_3,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_23"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:n.enterprise_nature,require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:n.min_withdraw_cash,require:!0,placeholder:"请输入提现额度",validator:[a.Validators.required,a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,e.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+e.uc.reg.MAX_NUMBER+")"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:c,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}else swal({title:"获取城市合伙人信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{city_partner_id:this.city_partner_id,city_partner_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_21,certificate_img_1:n.certificate_img_21,certificate_2:n.certificate_22,certificate_img_2:n.certificate_img_22,certificate_3:n.certificate_23,certificate_img_3:n.certificate_img_23,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:"",module_permission:JSON.parse(n.module_permission).join(",")}}};this.appHttpService.postData(this.uc.api.qc+"/update_city_partner_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/citypartnerList"):swal("编辑城市合伙人失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:i.c},{type:r.a}]},e}()},"64mG":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=["[_nghost-%COMP%]     uc-button button{margin-bottom:16px}"]},"7uIV":function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"agent-edit",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("2ymR"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("agent-edit",l.a,r,{},{},[])},"9nKS":function(e,t,n){"use strict";var a=n("BkNc"),r=n("bm2B"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,a){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.fields=[{label:"父账户",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:this.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入账户名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:"",placeholder:"请输入账户昵称"},{label:"密码",key:"password",controlType:"input",inputType:"password",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.PSW)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"密码长度6~16,只能包含数字、字母、._!@#"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"确认密码",key:"repassword",controlType:"input",inputType:"repassword",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"启用",key:"status",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入真实姓名",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入服务电话",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入手机号码",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入邮箱地址",validator:[r.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"联系地址",key:"business_address",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入联系地址",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"部门名称",key:"department",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入部门名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"工号",key:"staff_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入工号",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"职位",key:"position",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入职位",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入提现额度",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.ARITHMETIC_NUMBER)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:"",require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}return e.prototype.ngOnInit=function(){for(var e=(this.dataService.getCookies("admin_flg"),this.dataService.getLocalStorage("module_permission")),t=[],n=0,a=e;n<a.length;n++){var i=a[n];t.push({checked:!0,value:i.module_name,content:i.content})}this.fields.push({label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:t,validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{user_name:n.user_name.trim(),business_name:n.business_name.trim(),password:this.uc.toMD5(n.password,n.user_name.trim()),real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,status:n.status,mobile_no:n.mobile_no,business_address:n.business_address,department:n.department,staff_no:n.staff_no,position:n.position,min_withdraw_cash:n.min_withdraw_cash,service_validity:n.service_validity,module_permission:JSON.parse(n.module_permission).join(",")}};this.appHttpService.postData(this.uc.api.qc+"/add_sub_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/childAccountList"):swal("新增子账户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:a.c},{type:i.c}]},e}()},"9pmT":function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),i["ɵdid"](212992,null,0,l.y,[l.q,i.ViewContainerRef,i.ComponentFactoryResolver,[8,null],i.ChangeDetectorRef],null,null)],function(e,t){e(t,1,0)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"account",[],null,null,null,a,c)),i["ɵdid"](114688,null,0,o.a,[],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("BkNc"),o=n("lutC");n.d(t,"a",function(){return s});var u=[],c=i["ɵcrt"]({encapsulation:2,styles:u,data:{}}),s=i["ɵccf"]("account",o.a,r,{},{},[])},ABI2:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"childaccount-add",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("YgXK"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("childaccount-add",l.a,r,{},{},[])},FGI0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("/oeL"),r=n("Y/Tt"),i=n("URzX"),l=n("9pmT"),o=n("Mr+u"),u=n("ABI2"),c=n("hw9s"),s=n("tLEf"),p=n("c7Il"),d=n("zv86"),m=n("VRuk"),_=n("Nfbb"),y=n("7uIV"),v=n("UArV"),f=n("pIgS"),h=n("TJAV"),g=n("Rlb2"),b=n("xyym"),q=n("unpB"),T=n("lDRl"),k=n("luNT"),x=n("1mi0"),w=n("szaQ"),B=n("tCy9"),V=n("gHVx"),C=n("qbdv"),D=n("bm2B"),S=n("dWcS"),I=n("W5fO"),R=n("qCSQ"),H=n("+idH"),O=(n.n(H),n("BkNc")),M=n("eJnt"),N=n("X/HD"),U=n("0Zl/"),A=n("y8ct"),P=n("lutC"),L=n("xKjU"),E=n("YgXK"),G=n("O3If"),X=n("PDla"),z=n("9nKS"),Y=n("ysdH"),K=n("pZBR"),F=n("R3U0"),J=n("2ymR"),Q=n("bFJy"),j=n("SUv2"),Z=n("pLOu"),W=n("3Whe"),$=n("QQCo"),ee=n("LXva"),te=n("GwOG"),ne=n("g7iX"),ae=n("iZ1U"),re=n("2U2Y"),ie=n("xw8+"),le=n("utV4");n.d(t,"AccountModuleNgFactory",function(){return oe});var oe=a["ɵcmf"](r.a,[],function(e){return a["ɵmod"]([a["ɵmpd"](512,a.ComponentFactoryResolver,a["ɵCodegenComponentFactoryResolver"],[[8,[i.a,l.a,o.a,u.a,c.a,s.a,p.a,d.a,m.a,_.a,y.a,v.a,f.a,h.a,g.a,b.a,q.a,T.a,k.a,x.a,w.a,B.a,V.a]],[3,a.ComponentFactoryResolver],a.NgModuleRef]),a["ɵmpd"](4608,C.a,C.b,[a.LOCALE_ID]),a["ɵmpd"](4608,D.FormBuilder,D.FormBuilder,[]),a["ɵmpd"](4608,D["ɵi"],D["ɵi"],[]),a["ɵmpd"](4608,S.a,S.a,[]),a["ɵmpd"](4608,I.a,I.a,[]),a["ɵmpd"](4608,R.a,R.a,[]),a["ɵmpd"](512,H.CustomFormsModule,H.CustomFormsModule,[]),a["ɵmpd"](512,C.c,C.c,[]),a["ɵmpd"](512,O.x,O.x,[[2,O.m],[2,O.c]]),a["ɵmpd"](512,D["ɵba"],D["ɵba"],[]),a["ɵmpd"](512,D.ReactiveFormsModule,D.ReactiveFormsModule,[]),a["ɵmpd"](512,M.a,M.a,[]),a["ɵmpd"](512,D.FormsModule,D.FormsModule,[]),a["ɵmpd"](512,N.a,N.a,[]),a["ɵmpd"](512,U.a,U.a,[]),a["ɵmpd"](512,A.a,A.a,[]),a["ɵmpd"](512,r.a,r.a,[]),a["ɵmpd"](1024,O.t,function(){return[[{path:"",component:P.a,children:[{path:"",redirectTo:"childAccountList",pathMatch:"full"},{path:"childAccountList",component:L.a},{path:"childAccountAdd",component:E.a},{path:"childAccountEdit/:id",component:G.a},{path:"childAccountDetail/:id",component:X.a},{path:"childAccountOtherAdd",component:z.a},{path:"childAccountOtherEdit/:id",component:Y.a},{path:"agentAccountList",component:K.a},{path:"agentAccountAdd",component:F.a},{path:"agentAccountEdit/:id",component:J.a},{path:"agentAccountDetail/:id",component:Q.a},{path:"citypartnerList",component:j.a},{path:"citypartnerAdd",component:Z.a},{path:"citypartnerEdit/:id",component:W.a},{path:"citypartnerDetail/:id",component:$.a},{path:"merchantList",component:ee.a},{path:"merchantAdd",component:te.a},{path:"merchantEdit/:id",component:ne.a},{path:"merchantDetail/:id",component:ae.a},{path:"allChildAccountList/:id",component:re.a},{path:"allChildAccountDetail/:id",component:ie.a},{path:"allChildAccountEdit/:id",component:le.a}]}]]},[])])})},GwOG:function(e,t,n){"use strict";var a=n("BkNc"),r=n("bm2B"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a){var i=this;this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:this.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入账户名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:"",placeholder:"请输入账户昵称"},{label:"密码",key:"password",controlType:"input",inputType:"password",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.PSW)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"密码长度6~16,只能包含数字、字母、._!@#"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"确认密码",key:"repassword",controlType:"input",inputType:"repassword",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"启用",key:"status",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入真实姓名",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入服务电话",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入手机号码",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入邮箱地址",validator:[r.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:this.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:"0",placeholder:"--请选择省--"},city:{name:"city_code",value:"0",placeholder:"--请选择市--"},area:{name:"district_code",value:"0",placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_1",controlType:"input",inputType:"text",value:"",placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_1",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_1"}},{label:"税务登记证-登记号",key:"certificate_2",controlType:"input",inputType:"text",value:"",placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_2",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_2"}},{label:"组织结构代码",key:"certificate_3",controlType:"input",inputType:"text",value:"",placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_3",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_3"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:"",require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",require:!0,value:"",placeholder:"请输入提现额度",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,this.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+this.uc.reg.MAX_NUMBER+")"}]},{label:"运维人员手机号码",key:"maintenance_man_mobile",controlType:"inputadd",value:"",placeholder:"请输入运维人员手机号码",content:"确认",options:[]},{label:"电费单价(元)",key:"electricity_price",controlType:"input",inputType:"text",value:"",placeholder:"请输入电费单价",validator:[r.Validators.pattern(this.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,this.uc.reg.MAX_NUMBER])],errormsg:[{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"电费单价范围:(0-"+this.uc.reg.MAX_NUMBER+")"}]},{label:"结算",key:"whether_settlement",controlType:"radio",value:"2",require:!0,options:[{value:"1",content:"是"},{value:"2",content:"否"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}],click:function(e){1==e&&(i.fields[23].hidden=!1,i.fields[24].hidden=!1),2==e&&(i.fields[23].hidden=!0,i.fields[24].hidden=!0)}},{label:"结算周期(月)",key:"settlement_cycle",controlType:"input",inputType:"text",require:!0,hidden:!0,value:"0",placeholder:"请输入结算周期"},{label:"结算日(日)",key:"settlement_day",controlType:"input",inputType:"text",require:!0,hidden:!0,value:"0",placeholder:"请输入结算日"}]}return e.prototype.ngOnInit=function(){},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a=n.whether_settlement,r=n.settlement_cycle,i=n.settlement_day,l=n.maintenance_man_mobile;if(1==a){if(r<=0||r>12)return void swal({title:"提示!",text:"结算周期范围是[1-12]月",type:"error",timer:"2000"});if(i<=0||i>28)return void swal({title:"提示!",text:"结算日范围是[1-28]日",type:"error",timer:"2000"})}else r="0",i="0";var o;o=l?JSON.parse(l).join(","):"";var u={params:{user_name:n.user_name.trim(),business_name:n.business_name.trim(),password:this.uc.toMD5(n.password,n.user_name.trim()),real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_1,certificate_img_1:n.certificate_img_1,certificate_2:n.certificate_2,certificate_img_2:n.certificate_img_2,certificate_3:n.certificate_3,certificate_img_3:n.certificate_img_3,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:"",maintenance_man_mobile:o,electricity_price:n.electricity_price,whether_settlement:a,settlement_cycle:r,settlement_day:i}};this.appHttpService.postData(this.uc.api.qc+"/add_business_user",u).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/merchantList"):swal("新增商户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:a.c},{type:i.c}]},e}()},Ht5C:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=["[_nghost-%COMP%]     uc-button button{margin-bottom:16px}"]},LXva:function(e,t,n){"use strict";var a=n("IekC"),r=n("BkNc");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_business_user_list",{params:e}).subscribe(function(n){if(n.status){var a=n.data,r=a.list;t.plugins.grid.pagination.totalItems=a.total_num,t.plugins.grid.tbody=[];for(var i=0,l=r;i<l.length;i++){var o=l[i],u=void 0;u=[{content:o.user_id,hidden:!0},{content:o.user_name},{content:o.parent_name},{content:o.user_type_name},{content:"1"==o.status?"启用":"禁用"},{content:o.mobile_no}];var c=[];t.uc.powerfun(t.uc.constant.get_business_user)&&o.operation.indexOf(t.uc.powercontroll.read)>=0&&c.push({content:"查看",class:"btn-info",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/merchantDetail",n])}}),t.uc.powerfun(t.uc.constant.update_business_user)&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"编辑",class:"btn-primary",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/merchantEdit",n])}}),t.uc.powerfun(t.uc.constant.disable_user)&&"1"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"禁用",class:"btn-black",click:function(n){var a=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_user)&&"2"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"启用",class:"btn-success",click:function(n){var a=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.get_sub_user_list)&&c.push({content:"子账户",class:"btn-purple",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/allChildAccountList",n])}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取商户信息失败!",text:n.error_msg,type:"error",timer:"2000"})},function(e){console.log(e)})}}return e.prototype.ngOnInit=function(){var e=this;this.uc.powerfun(this.uc.constant.add_business_user)&&(this.plugins.button={class:"btn-primary",content:"新增商户",click:function(){e.router.navigateByUrl("pages/account/merchantAdd")}}),this.plugins.grid={th:[{content:"用户ID",hidden:!0},{content:"账户名称"},{content:"上级"},{content:"账户类型"},{content:"启用状态"},{content:"手机号码"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1,totalItems:1}},this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{bind_status:2}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{user_name:"",role:""}})},e.ctorParameters=function(){return[{type:r.c},{type:a.a},{type:a.b}]},e}()},MYCA:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=["[_nghost-%COMP%]     uc-button button{margin-bottom:16px}"]},"Mr+u":function(e,t,n){"use strict";function a(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),l["ɵted"](null,["\n    "])),(e()(),l["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,o.a,o.b)),l["ɵdid"](114688,null,0,u.a,[],{model:[0,"model"]},null),(e()(),l["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.plugins.button)},null)}function r(e){return l["ɵvid"](0,[(e()(),l["ɵand"](16777216,null,null,1,null,a)),l["ɵdid"](16384,null,0,c.m,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),l["ɵted"](null,["\n"])),(e()(),l["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var a=!0,r=e.component;if("pageBeChanged"===t){a=!1!==r.pageBeChanged(n)&&a}return a},p.a,p.b)),l["ɵdid"](114688,null,0,d.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){var n=t.component;e(t,1,0,n.plugins.button),e(t,4,0,n.plugins.grid)},null)}function i(e){return l["ɵvid"](0,[(e()(),l["ɵeld"](0,null,null,1,"childaccount-list",[],null,null,null,r,h)),l["ɵdid"](114688,null,0,s.a,[m.c,_.a,y.a,v.a],null,null)],function(e,t){e(t,1,0)},null)}var l=n("/oeL"),o=n("VC1C"),u=n("7rGF"),c=n("qbdv"),s=n("xKjU"),p=n("tvCx"),d=n("sQer"),m=n("BkNc"),_=n("ghHK"),y=n("0kYB"),v=n("U9zq");n.d(t,"a",function(){return g});var f=[],h=l["ɵcrt"]({encapsulation:2,styles:f,data:{}}),g=l["ɵccf"]("childaccount-list",s.a,i,{},{},[])},Nfbb:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"agent-add",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("R3U0"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("agent-add",l.a,r,{},{},[])},O3If:function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.sub_user_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_sub_user/",{params:{sub_user_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,u=[],c=0,s=i;c<s.length;c++){for(var p=s[c],d=!1,m=0,_=r;m<_.length;m++)if(_[m].module_name==p.module_name)var d=!0;u.push({checked:d,value:p.module_name,content:p.content})}e.fields=[{label:"父账户",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:e.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱地址",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"联系地址",key:"business_address",controlType:"input",inputType:"text",value:n.business_address,require:!0,placeholder:"请输入联系地址",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"部门名称",key:"department",controlType:"input",inputType:"text",value:n.department,require:!0,placeholder:"请输入部门名称",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"工号",key:"staff_no",controlType:"input",inputType:"text",value:n.staff_no,require:!0,placeholder:"请输入工号",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"职位",key:"position",controlType:"input",inputType:"text",value:n.position,require:!0,placeholder:"请输入职位",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:u,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}else swal({title:"获取城子账户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{sub_user_id:this.sub_user_id,sub_user_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,status:n.status,mobile_no:n.mobile_no,business_address:n.business_address,department:n.department,staff_no:n.staff_no,position:n.position,service_validity:n.service_validity,module_permission:JSON.parse(n.module_permission).join(",")}}};this.appHttpService.postData(this.uc.api.qc+"/update_sub_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/childAccountList"):swal("编辑子账户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:i.c},{type:r.a}]},e}()},PDla:function(e,t,n){"use strict";var a=n("BkNc"),r=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,a){this.appHttpService=e,this.uc=t,this.dataService=n,this.activatedRoute=a,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_sub_user/",{params:{sub_user_id:t.id}})}).subscribe(function(t){if(t.status){for(var n=t.data,a="",r=0;r<n.module_permission.length;r++)a+=n.module_permission[r].content+", ";var i=e.dataService.getCookies("admin_flg");e.plugins.table.data=[{type:"text",label:"上级机构",content:n.parent_name},{type:"text",label:"账户名称",content:n.user_name},{type:"text",label:"账户昵称",content:n.business_name},{type:"text",label:"账户类型",content:n.user_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"真实姓名",content:n.real_name},{type:"text",label:"服务电话",content:n.service_phone},{type:"text",label:"手机号码",content:n.mobile_no},{type:"text",label:"邮箱地址",content:n.email},{type:"text",label:"联系地址",content:n.business_address},{type:"text",label:"部门名称",content:n.department},{type:"text",label:"工号",content:n.staff_no},{type:"text",label:"职位",content:n.position},{type:"text",label:"权限模板",content:n.role},{type:"text",label:"权限",content:a},{type:"text",label:"服务有效期至",content:n.service_validity}],2==i&&e.plugins.table.data.splice(13,0,{type:"text",label:"最小提现额度",content:n.min_withdraw_cash+" 元"})}else swal({title:"获取子账户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:r.a},{type:r.b},{type:r.c},{type:a.a}]},e}()},QQCo:function(e,t,n){"use strict";var a=n("BkNc"),r=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.activatedRoute=n,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_city_partner_user/",{params:{city_partner_id:t.id}})}).subscribe(function(t){if(t.status){for(var n=t.data,a="",r=0;r<n.module_permission.length;r++)a+=n.module_permission[r].content+", ";var i="";n.province_code_name&&(i+=n.province_code_name),n.city_code_name&&(i+="-"+n.city_code_name),n.district_code_name&&(i+="-"+n.district_code_name),e.plugins.table.data=[{type:"text",label:"上级机构",content:n.parent_name},{type:"text",label:"账户名称",content:n.user_name},{type:"text",label:"账户昵称",content:n.business_name},{type:"text",label:"账户类型",content:n.user_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"真实姓名",content:n.real_name},{type:"text",label:"服务电话",content:n.service_phone},{type:"text",label:"手机号码",content:n.mobile_no},{type:"text",label:"邮箱地址",content:n.email},{type:"text",label:"业务地址",content:i},{type:"text",label:"营业执照-注册号",content:n.certificate_1},{type:"img",label:"营业执照-照片",src:[n.certificate_img_1]},{type:"text",label:"税务登记证-登记号",content:n.certificate_2},{type:"img",label:"税务登记证-照片",src:[n.certificate_img_2]},{type:"text",label:"组织结构代码",content:n.certificate_3},{type:"img",label:"组织结构代码-照片",src:[n.certificate_img_3]},{type:"text",label:"性质",content:1==n.enterprise_nature?"企业":2==n.enterprise_nature?"个人":"个人工商户"},{type:"text",label:"服务有效期至",content:n.service_validity},{type:"text",label:"最小提现额度",content:n.min_withdraw_cash+" 元"},{type:"text",label:"权限",content:a}]}else swal({title:"获取商户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:r.a},{type:r.b},{type:a.a}]},e}()},R3U0:function(e,t,n){"use strict";var a=n("BkNc"),r=n("bm2B"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:this.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入账户名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:"",placeholder:"请输入账户昵称"},{label:"密码",key:"password",controlType:"input",inputType:"password",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.PSW)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"密码长度6~16,只能包含数字、字母、._!@#"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"确认密码",key:"repassword",controlType:"input",inputType:"repassword",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"启用",key:"status",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入真实姓名",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入服务电话",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入手机号码",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入邮箱地址",validator:[r.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:this.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:"0",placeholder:"--请选择省--"},city:{name:"city_code",value:"0",placeholder:"--请选择市--"},area:{name:"district_code",value:"0",placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_11",controlType:"input",inputType:"text",value:"",placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_11",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_11"}},{label:"税务登记证-登记号",key:"certificate_12",controlType:"input",inputType:"text",value:"",placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_12",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_12"}},{label:"组织结构代码",key:"certificate_13",controlType:"input",inputType:"text",value:"",placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_13",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_13"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:"",require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入提现额度",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,this.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+this.uc.reg.MAX_NUMBER+")"}]}]}return e.prototype.ngOnInit=function(){},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{user_name:n.user_name.trim(),business_name:n.business_name.trim(),password:this.uc.toMD5(n.password,n.user_name.trim()),real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_11,certificate_img_1:n.certificate_img_11,certificate_2:n.certificate_12,certificate_img_2:n.certificate_img_12,certificate_3:n.certificate_13,certificate_img_3:n.certificate_img_13,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:""}};this.appHttpService.postData(this.uc.api.qc+"/add_agent_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/agentAccountList"):swal("新增代理商失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:a.c},{type:i.c}]},e}()},Rlb2:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"citypartner-edit",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("3Whe"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("citypartner-edit",l.a,r,{},{},[])},SUv2:function(e,t,n){"use strict";var a=n("IekC"),r=n("BkNc");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_city_partner_user_list",{params:e}).subscribe(function(n){if(n.status){var a=n.data,r=a.list;t.plugins.grid.pagination.totalItems=a.total_num,t.plugins.grid.tbody=[];for(var i=0,l=r;i<l.length;i++){var o=l[i],u=void 0;u=[{content:o.user_id,hidden:!0},{content:o.user_name},{content:o.parent_name},{content:o.user_type_name},{content:1==o.status?"启用":"禁用"},{content:o.mobile_no}];var c=[];t.uc.powerfun(t.uc.constant.get_city_partner_user)&&o.operation.indexOf(t.uc.powercontroll.read)>=0&&c.push({content:"查看",class:"btn-info",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/citypartnerDetail",n])}}),t.uc.powerfun(t.uc.constant.update_city_partner_user)&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"编辑",class:"btn-primary",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/citypartnerEdit",n])}}),t.uc.powerfun(t.uc.constant.disable_user)&&"1"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"禁用",class:"btn-black",click:function(n){var a=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_user)&&"2"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"启用",class:"btn-success",click:function(n){var a=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.get_sub_user_list)&&c.push({content:"子账户",class:"btn-purple",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/allChildAccountList",n])}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取城市合伙人信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.uc.powerfun(this.uc.constant.add_city_partner_user)&&(this.plugins.button={class:"btn-primary",content:"新增城市合伙人",click:function(){e.router.navigateByUrl("pages/account/citypartnerAdd")}}),this.plugins.grid={th:[{content:"账户ID",hidden:!0},{content:"账户名称"},{content:"上级"},{content:"账户类型"},{content:"启用状态"},{content:"手机号码"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1,totalItems:1}},this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.ctorParameters=function(){return[{type:r.c},{type:a.a},{type:a.b}]},e}()},TJAV:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"citypartner-add",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("pLOu"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("citypartner-add",l.a,r,{},{},[])},UArV:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,l.a,l.b)),i["ɵdid"](114688,null,0,o.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"agent-detail",[],null,null,null,a,m)),i["ɵdid"](114688,null,0,u.a,[c.a,s.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("DhbZ"),o=n("OkKd"),u=n("bFJy"),c=n("0kYB"),s=n("U9zq"),p=n("BkNc");n.d(t,"a",function(){return _});var d=[],m=i["ɵcrt"]({encapsulation:2,styles:d,data:{}}),_=i["ɵccf"]("agent-detail",u.a,r,{},{},[])},VRuk:function(e,t,n){"use strict";function a(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),o["ɵted"](null,["\n    "])),(e()(),o["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,u.a,u.b)),o["ɵdid"](114688,null,0,c.a,[],{model:[0,"model"]},null),(e()(),o["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.plugins.button)},null)}function r(e){return o["ɵvid"](0,[(e()(),o["ɵand"](16777216,null,null,1,null,a)),o["ɵdid"](16384,null,0,s.m,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["ɵted"](null,["\n"])),(e()(),o["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var a=!0,r=e.component;if("pageBeChanged"===t){a=!1!==r.pageBeChanged(n)&&a}return a},d.a,d.b)),o["ɵdid"](114688,null,0,m.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){var n=t.component;e(t,1,0,n.plugins.button),e(t,4,0,n.plugins.grid)},null)}function i(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,1,"agent-list",[],null,null,null,r,h)),o["ɵdid"](114688,null,0,p.a,[_.c,y.a,v.a],null,null)],function(e,t){e(t,1,0)},null)}var l=n("64mG"),o=n("/oeL"),u=n("VC1C"),c=n("7rGF"),s=n("qbdv"),p=n("pZBR"),d=n("tvCx"),m=n("sQer"),_=n("BkNc"),y=n("0kYB"),v=n("U9zq");n.d(t,"a",function(){return g});var f=[l.a],h=o["ɵcrt"]({encapsulation:0,styles:f,data:{}}),g=o["ɵccf"]("agent-list",p.a,i,{},{},[])},"Y/Tt":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){function e(){}return e}()},YgXK:function(e,t,n){"use strict";var a=n("BkNc"),r=n("bm2B"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,a){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.fields=[{label:"父账户",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:this.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入账户名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:"",placeholder:"请输入账户昵称"},{label:"密码",key:"password",controlType:"input",inputType:"password",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.PSW)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"密码长度6~16,只能包含数字、字母、._!@#"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"确认密码",key:"repassword",controlType:"input",inputType:"repassword",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"启用",key:"status",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入真实姓名",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入服务电话",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入手机号码",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入邮箱地址",validator:[r.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"联系地址",key:"business_address",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入联系地址",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"部门名称",key:"department",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入部门名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"工号",key:"staff_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入工号",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"职位",key:"position",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入职位",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:"",require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}return e.prototype.ngOnInit=function(){for(var e=(this.dataService.getCookies("admin_flg"),this.dataService.getLocalStorage("module_permission")),t=[],n=0,a=e;n<a.length;n++){var i=a[n];t.push({checked:!0,value:i.module_name,content:i.content})}var l={label:"角色",key:"module_permission",controlType:"radio",value:t[0].value,require:!0,options:t,validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]};this.fields.splice(14,0,l)},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{user_name:n.user_name.trim(),business_name:n.business_name.trim(),password:this.uc.toMD5(n.password,n.user_name.trim()),real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,status:n.status,mobile_no:n.mobile_no,business_address:n.business_address,department:n.department,staff_no:n.staff_no,position:n.position,service_validity:n.service_validity,module_permission:n.module_permission}};this.appHttpService.postData(this.uc.api.qc+"/add_sub_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/childAccountList"):swal("新增子账户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:a.c},{type:i.c}]},e}()},bFJy:function(e,t,n){"use strict";var a=n("BkNc"),r=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.activatedRoute=n,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_agent_user/",{params:{agent_id:t.id}})}).subscribe(function(t){if(t.status){for(var n=t.data,a="",r=0;r<n.module_permission.length;r++)a+=n.module_permission[r].content+", ";var i="";n.province_code_name&&(i+=n.province_code_name),n.city_code_name&&(i+="-"+n.city_code_name),n.district_code_name&&(i+="-"+n.district_code_name),e.plugins.table.data=[{type:"text",label:"上级机构",content:n.parent_name},{type:"text",label:"账户名称",content:n.user_name},{type:"text",label:"账户昵称",content:n.business_name},{type:"text",label:"账户类型",content:n.user_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"真实姓名",content:n.real_name},{type:"text",label:"服务电话",content:n.service_phone},{type:"text",label:"手机号码",content:n.mobile_no},{type:"text",label:"邮箱地址",content:n.email},{type:"text",label:"业务地址",content:i},{type:"text",label:"营业执照-注册号",content:n.certificate_1},{type:"img",label:"营业执照-照片",src:[n.certificate_img_1]},{type:"text",label:"税务登记证-登记号",content:n.certificate_2},{type:"img",label:"税务登记证-照片",src:[n.certificate_img_2]},{type:"text",label:"组织结构代码",content:n.certificate_3},{type:"img",label:"组织结构代码-照片",src:[n.certificate_img_3]},{type:"text",label:"性质",content:1==n.enterprise_nature?"企业":2==n.enterprise_nature?"个人":"个人工商户"},{type:"text",label:"服务有效期至",content:n.service_validity},{type:"text",label:"最小提现额度",content:n.min_withdraw_cash+" 元"},{type:"text",label:"权限",content:a}]}else swal({title:"获取代理商信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:r.a},{type:r.b},{type:a.a}]},e}()},c7Il:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"childaccountother-add",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("9nKS"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("childaccountother-add",l.a,r,{},{},[])},g7iX:function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a){this.uc=e,this.appHttpService=t,this.router=n,this.activatedRoute=a}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.city_partner_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_business_user/",{params:{business_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,c=[],s=0,p=i;s<p.length;s++){for(var d=p[s],m=!1,_=0,y=r;_<y.length;_++)if(y[_].module_name==d.module_name)var m=!0;c.push({checked:m,value:d.module_name,content:d.content})}var v=[];n.maintenance_man_mobile&&(v=n.maintenance_man_mobile.split(",")),e.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:n.parent_name},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱地址",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:e.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:n.province_code,placeholder:"--请选择省--"},city:{name:"city_code",value:n.city_code,placeholder:"--请选择市--"},area:{name:"district_code",value:n.district_code,placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_1",controlType:"input",inputType:"text",value:n.certificate_1,placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_1",controlType:"file",fileType:"img",value:n.certificate_img_1,config:{value:n.certificate_img_1,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_1"}},{label:"税务登记证-登记号",key:"certificate_2",controlType:"input",inputType:"text",value:n.certificate_2,placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_2",controlType:"file",fileType:"img",value:n.certificate_img_2,config:{value:n.certificate_img_2,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_2"}},{label:"组织结构代码",key:"certificate_3",controlType:"input",inputType:"text",value:n.certificate_3,placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_3",controlType:"file",fileType:"img",value:n.certificate_img_3,config:{value:n.certificate_img_3,accept:"image/*",uploadurl:e.uc.api.qc+"/upload_file/",capsule:"certificate_img_3"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:n.enterprise_nature,require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:n.min_withdraw_cash,require:!0,placeholder:"请输入提现额度",validator:[a.Validators.required,a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,e.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+e.uc.reg.MAX_NUMBER+")"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:c,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"运维人员手机号码",key:"maintenance_man_mobile",controlType:"inputadd",value:n.maintenance_man_mobile,placeholder:"请输入运维人员手机号码",content:"确认",options:v},{label:"电费单价(元)",key:"electricity_price",controlType:"input",inputType:"text",value:n.electricity_price,placeholder:"请输入电费单价",validator:[a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,e.uc.reg.MAX_NUMBER])],errormsg:[{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"电费单价范围:(0-"+e.uc.reg.MAX_NUMBER+")"}]},{label:"结算",key:"whether_settlement",controlType:"radio",value:n.whether_settlement,require:!0,options:[{value:"1",content:"是"},{value:"2",content:"否"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}],click:function(t){1==t&&(e.fields[22].hidden=!1,e.fields[23].hidden=!1),2==t&&(e.fields[22].hidden=!0,e.fields[23].hidden=!0)}},{label:"结算周期(月)",key:"settlement_cycle",controlType:"input",inputType:"text",require:!0,hidden:2==n.whether_settlement,value:0==n.settlement_cycle?1:n.settlement_cycle,placeholder:"请输入结算周期"},{label:"结算日(日)",key:"settlement_day",controlType:"input",inputType:"text",require:!0,hidden:2==n.whether_settlement,value:0==n.settlement_day?1:n.settlement_day,placeholder:"请输入结算日"}]}else swal({title:"获取商户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a=n.whether_settlement,r=n.settlement_cycle,i=n.settlement_day,l=n.maintenance_man_mobile;if(1==a){if(r<=0||r>12)return void swal({title:"提示!",text:"结算周期范围是[1-12]月",type:"error",timer:"2000"});if(i<=0||i>28)return void swal({title:"提示!",text:"结算日范围是[1-28]日",type:"error",timer:"2000"})}else r="0",i="0";var o="";l&&(o=JSON.parse(l).join(","));var u={params:{business_id:this.city_partner_id,business_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_1,certificate_img_1:n.certificate_img_1,certificate_2:n.certificate_2,certificate_img_2:n.certificate_img_2,certificate_3:n.certificate_3,certificate_img_3:n.certificate_img_3,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:"",module_permission:JSON.parse(n.module_permission).join(","),maintenance_man_mobile:o,electricity_price:n.electricity_price,whether_settlement:a,settlement_cycle:r,settlement_day:i}}};this.appHttpService.postData(this.uc.api.qc+"/update_business_user",u).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/merchantList"):swal("编辑商户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:r.a}]},e}()},gHVx:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"allchildaccount-edit",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("utV4"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("allchildaccount-edit",l.a,r,{},{},[])},hw9s:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"childaccount-edit",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("O3If"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("childaccount-edit",l.a,r,{},{},[])},iZ1U:function(e,t,n){"use strict";var a=n("BkNc"),r=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.activatedRoute=n,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_business_user/",{params:{business_id:t.id}})}).subscribe(function(t){if(t.status){for(var n=t.data,a="",r=0;r<n.module_permission.length;r++)a+=n.module_permission[r].content+", ";var i="";n.province_code_name&&(i+=n.province_code_name),n.city_code_name&&(i+="-"+n.city_code_name),n.district_code_name&&(i+="-"+n.district_code_name),e.plugins.table.data=[{type:"text",label:"上级机构",content:n.parent_name},{type:"text",label:"账户名称",content:n.user_name},{type:"text",label:"账户昵称",content:n.business_name},{type:"text",label:"账户类型",content:n.user_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"真实姓名",content:n.real_name},{type:"text",label:"服务电话",content:n.service_phone},{type:"text",label:"手机号码",content:n.mobile_no},{type:"text",label:"邮箱地址",content:n.email},{type:"text",label:"业务地址",content:i},{type:"text",label:"营业执照-注册号",content:n.certificate_1},{type:"img",label:"营业执照-照片",src:[n.certificate_img_1]},{type:"text",label:"税务登记证-登记号",content:n.certificate_2},{type:"img",label:"税务登记证-照片",src:[n.certificate_img_2]},{type:"text",label:"组织结构代码",content:n.certificate_3},{type:"img",label:"组织结构代码-照片",src:[n.certificate_img_3]},{type:"text",label:"性质",content:1==n.enterprise_nature?"企业":2==n.enterprise_nature?"个人":"个人工商户"},{type:"text",label:"服务有效期至",content:n.service_validity},{type:"text",label:"最小提现额度",content:n.min_withdraw_cash+" 元"},{type:"text",label:"运维人员手机号码",content:n.maintenance_man_mobile},{type:"text",label:"电费单价(元)",content:n.electricity_price||0},{type:"text",label:"权限",content:a},{type:"text",label:"结算",content:1==n.whether_settlement?"是":"否"}],1==n.whether_settlement&&(e.plugins.table.data.push({type:"text",label:"结算周期(月)",content:n.settlement_cycle}),e.plugins.table.data.push({type:"text",label:"结算日(日)",content:n.settlement_day}))}else swal({title:"获取商户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:r.a},{type:r.b},{type:a.a}]},e}()},lDRl:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"merchant-add",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("GwOG"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("merchant-add",l.a,r,{},{},[])},luNT:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"merchant-edit",[],null,null,null,a,m)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("g7iX"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc");n.d(t,"a",function(){return _});var d=[],m=i["ɵcrt"]({encapsulation:2,styles:d,data:{}}),_=i["ɵccf"]("merchant-edit",l.a,r,{},{},[])},lutC:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){function e(){}return e.prototype.ngOnInit=function(){},e.ctorParameters=function(){return[]},e}()},pIgS:function(e,t,n){"use strict";function a(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),o["ɵted"](null,["\n    "])),(e()(),o["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,u.a,u.b)),o["ɵdid"](114688,null,0,c.a,[],{model:[0,"model"]},null),(e()(),o["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.plugins.button)},null)}function r(e){return o["ɵvid"](0,[(e()(),o["ɵand"](16777216,null,null,1,null,a)),o["ɵdid"](16384,null,0,s.m,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["ɵted"](null,["\n"])),(e()(),o["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var a=!0,r=e.component;if("pageBeChanged"===t){a=!1!==r.pageBeChanged(n)&&a}return a},d.a,d.b)),o["ɵdid"](114688,null,0,m.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){var n=t.component;e(t,1,0,n.plugins.button),e(t,4,0,n.plugins.grid)},null)}function i(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,1,"citypartner-list",[],null,null,null,r,h)),o["ɵdid"](114688,null,0,p.a,[_.c,y.a,v.a],null,null)],function(e,t){e(t,1,0)},null)}var l=n("Ht5C"),o=n("/oeL"),u=n("VC1C"),c=n("7rGF"),s=n("qbdv"),p=n("SUv2"),d=n("tvCx"),m=n("sQer"),_=n("BkNc"),y=n("0kYB"),v=n("U9zq");n.d(t,"a",function(){return g});var f=[l.a],h=o["ɵcrt"]({encapsulation:0,styles:f,data:{}}),g=o["ɵccf"]("citypartner-list",p.a,i,{},{},[])},pLOu:function(e,t,n){"use strict";var a=n("BkNc"),r=n("bm2B"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt"),u=n("+idH");n.n(u);n.d(t,"a",function(){return c});var c=function(){function e(e,t,n,a){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.fields=[{label:"上级机构",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:this.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入账户名称",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:"",placeholder:"请输入账户昵称"},{label:"密码",key:"password",controlType:"input",inputType:"password",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.PSW)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"密码长度6~16,只能包含数字、字母、._!@#"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"确认密码",key:"repassword",controlType:"input",inputType:"repassword",value:"",require:!0,placeholder:"请输入密码",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"},{type:"validateEqual",content:"两次密码不一致"}]},{label:"启用",key:"status",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入真实姓名",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入服务电话",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入手机号码",validator:[r.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入邮箱地址",validator:[r.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"业务地址",key:"business_address",controlType:"address",hasChildGroup:!0,url:this.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:"0",placeholder:"--请选择省--"},city:{name:"city_code",value:"0",placeholder:"--请选择市--"},area:{name:"district_code",value:"0",placeholder:"--请选择区--"}}},{label:"营业执照-注册号",key:"certificate_21",controlType:"input",inputType:"text",value:"",placeholder:"请输入营业执照-注册号"},{label:"营业执照-照片",key:"certificate_img_21",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_21"}},{label:"税务登记证-登记号",key:"certificate_22",controlType:"input",inputType:"text",value:"",placeholder:"请输入税务登记证-登记号"},{label:"税务登记证-照片",key:"certificate_img_22",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_22"}},{label:"组织结构代码",key:"certificate_23",controlType:"input",inputType:"text",value:"",placeholder:"请输入组织结构代码"},{label:"组织结构代码-照片",key:"certificate_img_23",controlType:"file",fileType:"img",value:"",config:{value:"",accept:"image/*",uploadurl:this.uc.api.qc+"/upload_file/",capsule:"certificate_img_23"}},{label:"性质",key:"enterprise_nature",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"企业"},{value:"2",content:"个人"},{value:"3",content:"个人工商户"}],validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:"",require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[r.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入提现额度",validator:[r.Validators.required,r.Validators.pattern(this.uc.reg.ARITHMETIC_NUMBER),u.CustomValidators.range([0,this.uc.reg.MAX_NUMBER])],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"},{type:"range",content:"提现额度范围:(0-"+this.uc.reg.MAX_NUMBER+")"}]}]}return e.prototype.ngOnInit=function(){},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{user_name:n.user_name.trim(),business_name:n.business_name.trim(),password:this.uc.toMD5(n.password,n.user_name.trim()),real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,mobile_no:n.mobile_no,business_address:"",province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,certificate_1:n.certificate_21,certificate_img_1:n.certificate_img_21,certificate_2:n.certificate_22,certificate_img_2:n.certificate_img_22,certificate_3:n.certificate_23,certificate_img_3:n.certificate_img_23,enterprise_nature:n.enterprise_nature,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,status:n.status,staff_no:"",position:""}};this.appHttpService.postData(this.uc.api.qc+"/add_city_partner_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/citypartnerList"):swal("新增城市合伙人失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:a.c},{type:i.c}]},e}()},pZBR:function(e,t,n){"use strict";var a=n("IekC"),r=n("BkNc");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_agent_user_list",{params:e}).subscribe(function(n){if(n.status){var a=n.data,r=a.list;t.plugins.grid.pagination.totalItems=a.total_num,t.plugins.grid.tbody=[];for(var i=0,l=r;i<l.length;i++){var o=l[i],u=void 0;u=[{content:o.user_id,hidden:!0},{content:o.user_name},{content:o.parent_name},{content:o.user_type_name},{content:1==o.status?"启用":"禁用"},{content:o.mobile_no}];var c=[];t.uc.powerfun(t.uc.constant.get_agent_user)&&o.operation.indexOf(t.uc.powercontroll.read)>=0&&c.push({content:"查看",class:"btn-info",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/agentAccountDetail",n])}}),t.uc.powerfun(t.uc.constant.update_agent_user)&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"编辑",class:"btn-primary",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/agentAccountEdit",n])}}),t.uc.powerfun(t.uc.constant.disable_user)&&"1"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"禁用",class:"btn-black",click:function(n){var a=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:n.error_msg,type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_user)&&"2"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"启用",class:"btn-success",click:function(n){var a=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.get_sub_user_list)&&c.push({content:"子账户",class:"btn-purple",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/allChildAccountList",n])}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取代理信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.uc.powerfun(this.uc.constant.add_agent_user)&&(this.plugins.button={class:"btn-primary",content:"新增代理商",click:function(){e.router.navigateByUrl("pages/account/agentAccountAdd")}}),this.plugins.grid={th:[{content:"账户ID",hidden:!0},{content:"账户名称"},{content:"上级"},{content:"账户类型"},{content:"启用状态"},{content:"手机号码"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1,totalItems:1}},this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.ctorParameters=function(){return[{type:r.c},{type:a.a},{type:a.b}]},e}()},szaQ:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var a=!0,r=e.component;if("pageBeChanged"===t){a=!1!==r.pageBeChanged(n)&&a}return a},o.a,o.b)),i["ɵdid"](114688,null,0,u.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){e(t,1,0,t.component.plugins.grid)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"allaccount-list",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("2U2Y"),o=n("tvCx"),u=n("sQer"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("allaccount-list",l.a,r,{},{},[])},tCy9:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,l.a,l.b)),i["ɵdid"](114688,null,0,o.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"allchildaccount-detail",[],null,null,null,a,m)),i["ɵdid"](114688,null,0,u.a,[c.a,s.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("DhbZ"),o=n("OkKd"),u=n("xw8+"),c=n("0kYB"),s=n("U9zq"),p=n("BkNc");n.d(t,"a",function(){return _});var d=[],m=i["ɵcrt"]({encapsulation:2,styles:d,data:{}}),_=i["ɵccf"]("allchildaccount-detail",u.a,r,{},{},[])},tLEf:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,l.a,l.b)),i["ɵdid"](114688,null,0,o.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"childaccount-detail",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,u.a,[c.a,s.a,p.a,d.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("DhbZ"),o=n("OkKd"),u=n("PDla"),c=n("0kYB"),s=n("U9zq"),p=n("ghHK"),d=n("BkNc");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("childaccount-detail",u.a,r,{},{},[])},unpB:function(e,t,n){"use strict";function a(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),o["ɵted"](null,["\n    "])),(e()(),o["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,u.a,u.b)),o["ɵdid"](114688,null,0,c.a,[],{model:[0,"model"]},null),(e()(),o["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.plugins.button)},null)}function r(e){return o["ɵvid"](0,[(e()(),o["ɵand"](16777216,null,null,1,null,a)),o["ɵdid"](16384,null,0,s.m,[o.ViewContainerRef,o.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),o["ɵted"](null,["\n"])),(e()(),o["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var a=!0,r=e.component;if("pageBeChanged"===t){a=!1!==r.pageBeChanged(n)&&a}return a},d.a,d.b)),o["ɵdid"](114688,null,0,m.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){var n=t.component;e(t,1,0,n.plugins.button),e(t,4,0,n.plugins.grid)},null)}function i(e){return o["ɵvid"](0,[(e()(),o["ɵeld"](0,null,null,1,"merchant-list",[],null,null,null,r,h)),o["ɵdid"](114688,null,0,p.a,[_.c,y.a,v.a],null,null)],function(e,t){e(t,1,0)},null)}var l=n("MYCA"),o=n("/oeL"),u=n("VC1C"),c=n("7rGF"),s=n("qbdv"),p=n("LXva"),d=n("tvCx"),m=n("sQer"),_=n("BkNc"),y=n("0kYB"),v=n("U9zq");n.d(t,"a",function(){return g});var f=[l.a],h=o["ɵcrt"]({encapsulation:0,styles:f,data:{}}),g=o["ɵccf"]("merchant-list",p.a,i,{},{},[])},utV4:function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.sub_user_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_sub_user/",{params:{sub_user_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,u=[],c=0,s=i;c<s.length;c++){for(var p=s[c],d=!1,m=0,_=r;m<_.length;m++)if(_[m].module_name==p.module_name)var d=!0;u.push({checked:d,value:p.module_name,content:p.content})}e.fields=[{label:"父账户",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:e.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱地址",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"联系地址",key:"business_address",controlType:"input",inputType:"text",value:n.business_address,require:!0,placeholder:"请输入联系地址",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"部门名称",key:"department",controlType:"input",inputType:"text",value:n.department,require:!0,placeholder:"请输入部门名称",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"工号",key:"staff_no",controlType:"input",inputType:"text",value:n.staff_no,require:!0,placeholder:"请输入工号",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"职位",key:"position",controlType:"input",inputType:"text",value:n.position,require:!0,placeholder:"请输入职位",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:n.min_withdraw_cash,require:!0,placeholder:"请输入提现额度",validator:[a.Validators.required,a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:u,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}else swal({title:"获取子账户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{sub_user_id:this.sub_user_id,sub_user_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,status:n.status,mobile_no:n.mobile_no,business_address:n.business_address,department:n.department,staff_no:n.staff_no,position:n.position,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,module_permission:JSON.parse(n.module_permission).join(",")}}};this.appHttpService.postData(this.uc.api.qc+"/update_sub_user",a).subscribe(function(e){if(e.status){var n=localStorage.getItem("currentLowerId");t.router.navigateByUrl("pages/account/allChildAccountList/"+n)}else swal("编辑子账户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:i.c},{type:r.a}]},e}()},xKjU:function(e,t,n){"use strict";var a=n("IekC"),r=n("BkNc");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,a){this.router=e,this.dataService=t,this.appHttpService=n,this.uc=a,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_sub_user_list",{params:e}).subscribe(function(n){if(n.status){var a=n.data,r=a.list;t.plugins.grid.pagination.totalItems=a.total_num,t.plugins.grid.tbody=[];for(var i=0,l=r;i<l.length;i++){var o=l[i],u=void 0;u=[{content:o.user_id,hidden:!0},{content:o.user_name},{content:o.parent_name},{content:o.user_type_name+"-"+o.role},{content:1==o.status?"启用":"禁用"},{content:o.mobile_no}];var c=[];t.uc.powerfun(t.uc.constant.get_sub_user)&&o.operation.indexOf(t.uc.powercontroll.read)>=0&&c.push({content:"查看",class:"btn-info",click:function(e){var n=e[0].content;t.router.navigate(["pages/account/childAccountDetail",n])}}),t.uc.powerfun(t.uc.constant.update_sub_user)&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"编辑",class:"btn-primary",click:function(e){var n=e[0].content;1==t.admin_flg?t.router.navigate(["pages/account/childAccountEdit",n]):2==t.admin_flg&&t.router.navigate(["pages/account/childAccountOtherEdit",n])}}),t.uc.powerfun(t.uc.constant.disable_user)&&"1"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"禁用",class:"btn-black",click:function(n){var a=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_user)&&"2"==o.status&&o.operation.indexOf(t.uc.powercontroll.update)>=0&&c.push({content:"启用",class:"btn-success",click:function(n){var a=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_user/",{params:{user_id:a}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取子账户信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this,t=this.dataService.getCookies("user_id"),n=this.dataService.getCookies("parent_id"),a=this.dataService.getCookies("user_type");this.admin_flg=this.dataService.getCookies("admin_flg");var r;r=2==a?n:t,this.uc.powerfun(this.uc.constant.add_sub_user)&&(this.plugins.button={class:"btn-primary",content:"新增子账户",click:function(){1==e.admin_flg?e.router.navigateByUrl("pages/account/childAccountAdd"):2==e.admin_flg&&e.router.navigateByUrl("pages/account/childAccountOtherAdd")}}),this.plugins.grid={th:[{content:"账户ID",hidden:!0},{content:"账户名称"},{content:"上级"},{content:"账户类型"},{content:"启用状态"},{content:"手机号码"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1,totalItems:1}},this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{parent_id:r}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{}})},e.ctorParameters=function(){return[{type:r.c},{type:a.c},{type:a.a},{type:a.b}]},e}()},"xw8+":function(e,t,n){"use strict";var a=n("BkNc"),r=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.activatedRoute=n,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_sub_user/",{params:{sub_user_id:t.id}})}).subscribe(function(t){if(t.status){for(var n=t.data,a="",r=0;r<n.module_permission.length;r++)a+=n.module_permission[r].content+", ";e.plugins.table.data=[{type:"text",label:"上级机构",content:n.parent_name},{type:"text",label:"账户名称",content:n.user_name},{type:"text",label:"账户昵称",content:n.business_name},{type:"text",label:"账户类型",content:n.user_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"真实姓名",content:n.real_name},{type:"text",label:"服务电话",content:n.service_phone},{type:"text",label:"手机号码",content:n.mobile_no},{type:"text",label:"邮箱地址",content:n.email},{type:"text",label:"联系地址",content:n.business_address},{type:"text",label:"部门名称",content:n.department},{type:"text",label:"工号",content:n.staff_no},{type:"text",label:"职位",content:n.position},{type:"text",label:"最小提现额度",content:n.min_withdraw_cash+" 元"},{type:"text",label:"权限模板",content:n.role},{type:"text",label:"权限",content:a},{type:"text",label:"服务有效期至",content:n.service_validity}]}else swal({title:"获取子账户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:r.a},{type:r.b},{type:a.a}]},e}()},xyym:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,l.a,l.b)),i["ɵdid"](114688,null,0,o.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"citypartner-detail",[],null,null,null,a,m)),i["ɵdid"](114688,null,0,u.a,[c.a,s.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("DhbZ"),o=n("OkKd"),u=n("QQCo"),c=n("0kYB"),s=n("U9zq"),p=n("BkNc");n.d(t,"a",function(){return _});var d=[],m=i["ɵcrt"]({encapsulation:2,styles:d,data:{}}),_=i["ɵccf"]("citypartner-detail",u.a,r,{},{},[])},ysdH:function(e,t,n){"use strict";var a=n("bm2B"),r=n("BkNc"),i=n("IekC"),l=n("p7O/"),o=n("P4Tt");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,a,r){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=a,this.activatedRoute=r}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){e.sub_user_id=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_sub_user/",{params:{sub_user_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.user_name=n.user_name;for(var r=n.module_permission,i=n.role_module_permission,u=[],c=0,s=i;c<s.length;c++){for(var p=s[c],d=!1,m=0,_=r;m<_.length;m++)if(_[m].module_name==p.module_name)var d=!0;u.push({checked:d,value:p.module_name,content:p.content})}e.fields=[{label:"父账户",key:"old_user_name",controlType:"input",inputType:"text",disabled:!0,value:e.dataService.getCookies("user_name")},{label:"账户名称",key:"user_name",controlType:"input",inputType:"text",value:n.user_name,disabled:!0,placeholder:"请输入账户名称"},{label:"账户昵称",key:"business_name",controlType:"input",inputType:"text",value:n.business_name,placeholder:"请输入账户昵称"},{label:"启用",key:"status",controlType:"radio",value:n.status,require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"真实姓名",key:"real_name",controlType:"input",inputType:"text",value:n.real_name,require:!0,placeholder:"请输入真实姓名",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"服务电话",key:"service_phone",controlType:"input",inputType:"text",value:n.service_phone,require:!0,placeholder:"请输入服务电话",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"手机号码",key:"mobile_no",controlType:"input",inputType:"text",value:n.mobile_no,require:!0,placeholder:"请输入手机号码",validator:[a.Validators.required,l.a],errormsg:[{type:"required",content:"必填项目"},{type:"phoneValidator",content:"请填写正确的电话号码"}]},{label:"邮箱地址",key:"email",controlType:"input",inputType:"text",value:n.email,require:!0,placeholder:"请输入邮箱地址",validator:[a.Validators.required,o.a],errormsg:[{type:"required",content:"必填项目"},{type:"emailValidator",content:"请填写正确的电子邮箱"}]},{label:"联系地址",key:"business_address",controlType:"input",inputType:"text",value:n.business_address,require:!0,placeholder:"请输入联系地址",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"部门名称",key:"department",controlType:"input",inputType:"text",value:n.department,require:!0,placeholder:"请输入部门名称",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"工号",key:"staff_no",controlType:"input",inputType:"text",value:n.staff_no,require:!0,placeholder:"请输入工号",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"职位",key:"position",controlType:"input",inputType:"text",value:n.position,require:!0,placeholder:"请输入职位",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"最小提现额度(元)",key:"min_withdraw_cash",controlType:"input",inputType:"text",value:n.min_withdraw_cash,require:!0,placeholder:"请输入提现额度",validator:[a.Validators.required,a.Validators.pattern(e.uc.reg.ARITHMETIC_NUMBER)],errormsg:[{type:"required",content:"必填项目"},{type:"pattern",content:"输入的格式不正确(例：1.00)"}]},{label:"服务有效期至",key:"service_validity",controlType:"time",value:n.service_validity,require:!0,config:{showTimePicker:!1,format:0},placeholder:"请点击选择日期",validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"权限模块",key:"module_permission",controlType:"checkbox",require:!0,value:"",options:u,validator:[a.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}else swal({title:"获取子账户信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,a={params:{sub_user_id:this.sub_user_id,sub_user_info:{user_name:this.user_name,business_name:n.business_name.trim(),password:n.password,real_name:n.real_name.trim(),service_phone:n.service_phone,email:n.email,status:n.status,mobile_no:n.mobile_no,business_address:n.business_address,department:n.department,staff_no:n.staff_no,position:n.position,service_validity:n.service_validity,min_withdraw_cash:n.min_withdraw_cash,module_permission:JSON.parse(n.module_permission).join(",")}}};this.appHttpService.postData(this.uc.api.qc+"/update_sub_user",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/account/childAccountList"):swal("编辑子账户失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:r.c},{type:i.c},{type:r.a}]},e}()},zv86:function(e,t,n){"use strict";function a(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var a=!0,r=e.component;if("upformdata"===t){a=!1!==r.saveData(n)&&a}return a},o.a,o.b)),i["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function r(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"childaccountother-edit",[],null,null,null,a,_)),i["ɵdid"](114688,null,0,l.a,[c.a,s.a,p.c,d.a,p.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("/oeL"),l=n("ysdH"),o=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),p=n("BkNc"),d=n("ghHK");n.d(t,"a",function(){return y});var m=[],_=i["ɵcrt"]({encapsulation:2,styles:m,data:{}}),y=i["ɵccf"]("childaccountother-edit",l.a,r,{},{},[])}});