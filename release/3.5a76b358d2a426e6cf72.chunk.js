webpackJsonp([3],{"0cWP":function(e,t,n){"use strict";var l=n("BkNc"),o=n("bm2B"),a=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,l){this.uc=e,this.appHttpService=t,this.router=n,this.activatedRoute=l,this.showMap=!1,this.lnglat={lng:"",lat:""}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_device",{params:{device_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.device_id=n.device_id,e.soft_ver=n.soft_ver;var l=e.uc.BD09ToGCJ02(n.device_lat,n.device_lng);e.lnglat={lng:l.lon,lat:l.lat},e.fields=[{label:"设备编号",key:"device_no",controlType:"input",inputType:"text",require:!0,disabled:!0,value:n.device_no,placeholder:"请输入设备编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备名称",key:"device_name",controlType:"input",inputType:"text",require:!0,value:n.device_name,placeholder:"请输入设备名称",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"启用状态",key:"status",controlType:"radio",value:n.status||"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备类型",key:"device_type",controlType:"radio",value:n.device_type,require:!0,options:1==n.device_type?[{value:"1",content:"充电桩"}]:[{value:"2",content:"充值机"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"通讯方式",key:"communicate_type",controlType:"radio",value:n.communicate_type,require:!0,options:null==n.communicate_type?[{value:"1",content:"wifi"},{value:"2",content:"gprs"}]:1==n.communicate_type?[{value:"1",content:"wifi"}]:[{value:"2",content:"gprs"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"固定版本",key:"soft_ver",controlType:"input",inputType:"text",require:!0,value:n.soft_ver,placeholder:"请输入固定版本",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"电表编号",key:"meters_no",controlType:"input",inputType:"text",require:!0,value:n.meters_no,placeholder:"请输入电表编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备所在地区",key:"business_address",controlType:"address",hasChildGroup:!0,require:!0,url:e.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:n.province_code||"0",content:n.province_code_name||"",placeholder:"--请选择省--"},city:{name:"city_code",value:n.city_code||"0",content:n.city_code_name||"",placeholder:"--请选择市--"},area:{name:"district_code",value:n.district_code||"0",content:n.district_code_name||"",placeholder:"--请选择区--"}},validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备详细地址",key:"device_address",controlType:"input",inputType:"text",require:!0,button:{class:"btn-success",content:"经纬度拾取",click:function(t){var n=e.fields[7].config,l=e.fields[8];if(""==n.province.content&&""==n.city.content&&""==n.area.content)return void swal({title:"提示!",text:"请先选择设备所在地区",type:"error",timer:"2000"});if(""==l.value)return void swal({title:"提示!",text:"请先输入设备详细地址",type:"error",timer:"2000"});e.showMap=!0;var o=n.province.content+n.city.content+n.area.content+l.value;AMap.service("AMap.Geocoder",function(){(new AMap.Geocoder).getLocation(o,function(t,n){if("complete"===t&&"OK"===n.info){e.lnglat={lng:n.geocodes[0].location.lng,lat:n.geocodes[0].location.lat};var l=new AMap.Map("coordinate",{resizeEnable:!0,zoom:18,center:[n.geocodes[0].location.lng,n.geocodes[0].location.lat]}),o=new AMap.Marker({map:l,bubble:!0});AMap.event.addListener(l,"click",function(t){o.setPosition([t.lnglat.lng,t.lnglat.lat]),e.lnglat={lng:t.lnglat.lng,lat:t.lnglat.lat}})}else e.showMap=!1,swal({title:"经纬度拾取失败!",text:"请重置地区和设备详细地址",type:"error",timer:"2000"})})})}},value:n.device_address||"",placeholder:"请输入设备详细地址",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备所在小区名称",key:"areas_name",controlType:"input",inputType:"text",require:!0,value:n.areas_name||"",placeholder:"请输入设备所在小区名称",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"纬度",key:"device_lat",controlType:"input",inputType:"text",require:!0,disabled:!0,value:e.lnglat.lat||"",placeholder:"请使用坐标拾取工具获取纬度",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"经度",key:"device_lng",controlType:"input",inputType:"text",require:!0,disabled:!0,value:e.lnglat.lng||"",placeholder:"请使用坐标拾取工具获取经度",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}],1==n.device_type&&(e.fields.push({label:"商品选择",key:"commodity_ids",controlType:"checkbox",require:!0,value:"",options:"",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}),e.appHttpService.postData(e.uc.api.qc+"/get_commodity_list",{params:{page_now:1,limit:500,sort_by:"create_time",sort_type:"",search_by:{}}}).subscribe(function(t){if(t.status){for(var n=t.data.list,l=[],o=0,a=n;o<a.length;o++){var i=a[o];l.push({checked:!0,value:i.commodity_id,content:i.commodity_name})}e.fields[12].options=l}else swal({title:"获取商品信息失败!",text:t.error_msg,type:"error",timer:"2000"})}))}else swal({title:"获取设备信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,l=this.uc.GCJ02ToBD09(this.lnglat.lat,this.lnglat.lng),o=[];n.commodity_ids&&(o=JSON.parse(n.commodity_ids));var a={params:{device_info:{device_name:n.device_name.trim(),status:n.status,device_type:n.device_type,province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,device_address:n.device_address,areas_name:n.areas_name,device_lat:l.lat,device_lng:l.lon,communicate_type:n.communicate_type,soft_ver:n.soft_ver,meters_no:n.meters_no},device_id:this.device_id,commodity_ids:o}};this.appHttpService.postData(this.uc.api.qc+"/update_device",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/equipment/equipmentList"):swal("设备初始化失败",e.error_msg,"error")})},e.prototype.confirmMap=function(){this.fields[10].value=this.lnglat.lat,this.fields[11].value=this.lnglat.lng,this.showMap=!1},e.ctorParameters=function(){return[{type:a.b},{type:a.a},{type:l.c},{type:l.a}]},e}()},"2gFL":function(e,t,n){"use strict";var l=n("IekC"),o=n("BkNc");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.searchBy={bind_status:2},this.moreCondition=!1,this.zoomInfo={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_device_list",{params:e}).subscribe(function(n){if(n.status){var l=n.data,o=l.list;t.plugins.grid.tbody=[],t.plugins.grid.pagination.totalItems=l.total_num;for(var a=0,i=o;a<i.length;a++){var r=i[a];!function(n){var l=void 0;l=[{content:n.device_id,hidden:!0},{content:n.device_no},{content:n.device_name},{content:n.device_type_name},{content:n.bind_status_name},{content:n.net_status_name},{content:n.soft_ver},{content:n.areas_name},{content:"1"==n.status?"启用":"禁用"}];var o=[];t.uc.powerfun(t.uc.constant.get_device)&&n.operation.indexOf(t.uc.powercontroll.read)>=0&&o.push({content:"查看",class:"btn-info",click:function(e){t.router.navigate(["pages/equipment/equipmentDetail",n.device_id])}}),t.uc.powerfun(t.uc.constant.disable_device)&&"1"==n.status&&n.operation.indexOf(t.uc.powercontroll.update)>=0&&o.push({content:"禁用",class:"btn-black",click:function(n){var l=n[0].content;swal({title:"确定禁用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/disable_device/",{params:{device_id:l}}).subscribe(function(n){n.status?(swal({title:"禁用成功!",text:n.error_msg,type:"success",timer:"2000"}),t.getGridData(e)):swal("禁用失败!",n.error_msg,"error")})},function(){})}}),t.uc.powerfun(t.uc.constant.start_device)&&"2"==n.status&&n.operation.indexOf(t.uc.powercontroll.update)>=0&&o.push({content:"启用",class:"btn-success",click:function(n){var l=n[0].content;swal({title:"确定启用?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/start_device/",{params:{device_id:l}}).subscribe(function(n){n.status?(swal({title:"启用成功!",text:n.error_msg,type:"success",timer:"2000"}),t.getGridData(e)):swal("启用失败!",n.error_msg,"error")})},function(){})}}),1==n.device_type&&t.uc.powerfun(t.uc.constant.get_device_statistics)&&t.uc.powerfun(t.uc.constant.get_order_list)&&o.push({content:"桩状态",class:"btn-warning",click:function(e){var n=e[0].content;t.router.navigate(["pages/charge/chargeStatus",n])}}),t.uc.powerfun(t.uc.constant.generate_qr_code)&&o.push({content:"二维码",class:"btn-purple",click:function(e){var n=e[1].content;t.appHttpService.postData(t.uc.api.qc+"/generate_qr_code/",{params:{device_no:n}}).subscribe(function(e){e.status?(t.zoomInfo.src=e.data.src,t.zoomInfo.show=!0,t.zoomInfo.device_no=n):swal({title:"获取设备二维码失败!",text:e.error_msg,type:"error",timer:"2000"})})}}),t.uc.powerfun(t.uc.constant.update_device)&&n.operation.indexOf(t.uc.powercontroll.update)>=0&&o.push({content:"编辑",class:"btn-primary",click:function(e){t.router.navigate(["pages/equipment/equipmentInitEdit",n.device_id])}}),1==n.device_type&&t.uc.powerfun(t.uc.constant.set_device_params)&&n.operation.indexOf(t.uc.powercontroll.update)>=0&&1==n.net_status&&o.push({content:"参数配置",class:"btn-danger",click:function(e){t.router.navigate(["pages/equipment/equipmentConfig",n.device_no])}}),t.uc.powerfun(t.uc.constant.device_unbundling)&&o.push({content:"解绑",class:"btn-danger",click:function(n){var l=n[0].content;swal({title:"确定解绑?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/device_unbundling/",{params:{device_id:l}}).subscribe(function(n){n.status?(swal({title:"解绑成功,请到未解绑一览操作此设备!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("解绑失败!",n.error_msg,"error")})},function(){})}}),l.push({type:"operation",operation:o}),t.plugins.grid.tbody.push(l)}(r)}}else swal({title:"获取设备信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.uc.powerfun(this.uc.constant.device_binding)&&(this.plugins.button={class:"btn-primary",content:"设备初始化",click:function(){e.router.navigateByUrl("pages/equipment/equipmentInitAdd")}}),this.plugins.grid={th:[{content:"设备编号ID",hidden:!0},{content:"设备编号"},{content:"设备名称"},{content:"设备类型"},{content:"设备状态"},{content:"在线状态"},{content:"固定版本"},{content:"设备小区名称"},{content:"启用状态"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1}},this.plugins.search=[{title:"设备编号",key:"device_no",controlType:"input",value:"",placeholder:"请输入设备编号"},{title:"设备状态",key:"bind_status",controlType:"select",value:"0",placeholder:"请选择设备状态",options:[{name:"已绑定",geo_id:"2"},{name:"未分配",geo_id:"3"}]},{title:"设备名称",key:"device_name",controlType:"input",value:"",placeholder:"请输入设备名称"},{title:"设备类型",key:"device_type",controlType:"select",value:"0",placeholder:"请选择设备类型",options:[{name:"充电桩",geo_id:"1"},{name:"充值机",geo_id:"2"}]},{title:"设备地址",key:"device_address",controlType:"address",hasChildGroup:!0,hidden:!0,url:this.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:"0",placeholder:"--请选择省--"},city:{name:"city_code",value:"0",placeholder:"--请选择市--"},area:{name:"district_code",value:"0",placeholder:"--请选择区--"}}},{title:"设备小区",key:"areas_name",controlType:"input",value:"",hidden:!0,placeholder:"请输入设备小区名称"}],this.plugins.buttons=[{type:"notform",class:"btn-success",content:"展开条件",click:function(){if(e.moreCondition=!e.moreCondition,e.moreCondition){e.plugins.buttons[0].content="收起条件";for(var t=4;t<e.plugins.search.length;t++)e.plugins.search[t].hidden=!1}else{e.plugins.buttons[0].content="展开条件";for(var t=4;t<e.plugins.search.length;t++)e.plugins.search[t].hidden=!0}}},{type:"form",class:"btn-primary",content:"搜索",click:function(t){var n=(void 0===t?{value:n}:t).value,l=n.device_no,o=n.bind_status,a=n.device_name,i=n.device_type,r=n.device_address,u=n.areas_name;e.searchBy={device_no:l?l.trim():"",bind_status:o||2,device_name:a?a.trim():"",device_type:i,areas_name:u?u.trim():"",province_code:r.province_code,city_code:r.city_code,district_code:r.district_code},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}},{type:"form",class:"btn-info",content:"导出",click:function(t){var n=(void 0===t?{value:n}:t).value;e.downloadTemplate(e.searchBy)}},{type:"reset",class:"btn-danger",content:"重置",click:function(){e.searchBy={bind_status:2},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}}],this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:this.searchBy})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:this.searchBy})},e.prototype.closeZoom=function(){this.zoomInfo.show=!1},e.prototype.downloadimg=function(){this.appHttpService.postData(this.uc.api.qc+"/download_qr_code_zip/",{params:{device_no:this.zoomInfo.device_no}}).subscribe(function(e){e.status?window.location=e.data.src:swal("下载设备二维码失败!",e.error_msg,"error")})},e.prototype.downloadTemplate=function(e){this.appHttpService.getBinary(this.uc.api.qc+"/download_device_info/",{params:e}).subscribe(function(e){var t=e.headers._headers.get("content-disposition");if(t){var n=new Blob([e._body],{type:"application/vnd.ms-excel"}),l=URL.createObjectURL(n),o=document.createElement("a"),a=t[0].split(";")[1].trim().split("=")[1];try{a=JSON.parse(a)}catch(e){console.log(e)}document.body.appendChild(o),o.setAttribute("style","display:none"),o.setAttribute("href",l),o.setAttribute("download",a),o.click(),URL.revokeObjectURL(l)}else swal("下载失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:o.c},{type:l.a},{type:l.b}]},e}()},"6Vbg":function(e,t,n){"use strict";var l=n("BkNc"),o=n("IekC");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){var l=this;this.uc=e,this.appHttpService=t,this.router=n,this.file={},this.progressBar=0,this.fileError=!1,this.flag=!1,this.id="template",this.accept="application/vnd.ms-excel",this.cannotupload=!0,this.canClick=!0,this.uploadProgress=function(e){l.progressBar=100*Number((e.loaded/e.total).toFixed(2))*.8},this.uploadComplete=function(e){var t=(void 0===e?{currentTarget:t}:e).currentTarget,n=JSON.parse(t.responseText);if(n.status){l.flag=!1,l.progressBar=100,swal({title:"导入成功!",text:"导入成功,请到未绑设备一览查看",type:"success",confirmButtonText:"OK",timer:5e3}).then(function(){clearTimeout(o),l.router.navigateByUrl("pages/equipment/equipmentUnbind")});var o=setTimeout(function(){l.router.navigateByUrl("pages/equipment/equipmentUnbind")},5e3)}else l.flag=!0,l.progressBar=0,l.fileError=!0,l.selectedFile.value="",swal({title:"上传文件失败!",text:n.error_msg,type:"error"})}}return e.prototype.ngOnInit=function(){this.uploadurl=this.uc.api.qc+"/create_device_by_excel/"},e.prototype.filehasup=function(e){console.log(e)},e.prototype.uploadTemplate=function(){var e=new XMLHttpRequest,t=new FormData;t.append("file",this.file),e.open("POST",this.uploadurl);var n=localStorage.getItem("secret_token");e.setRequestHeader("Authrization",JSON.parse(n)),e.send(t),e.upload.addEventListener("progress",this.uploadProgress,!1),e.addEventListener("load",this.uploadComplete,!1),e.addEventListener("error",this.uploadFailed,!1),e.addEventListener("abort",this.uploadCanceled,!1)},e.prototype.selectFile=function(){var e=this,t=document.getElementById(this.id);this.canClick&&(t.click(),this.canClick=!1,setTimeout(function(){e.canClick=!0},500))},e.prototype.canup=function(e){this.fileError=!1,this.selectedFile=document.getElementById(this.id),this.file=this.selectedFile.files[0],this.file?this.cannotupload=!1:this.cannotupload=!0},e.prototype.uploadFailed=function(){console.log("error")},e.prototype.uploadCanceled=function(){console.log("abort")},e.prototype.downloadTemplate=function(){this.appHttpService.getBinary(this.uc.api.qc+"/download_device_template/").subscribe(function(e){var t=e.headers._headers.get("content-disposition");if(t){var n=new Blob([e._body],{type:"application/vnd.ms-excel"}),l=URL.createObjectURL(n),o=document.createElement("a"),a=t[0].split(";")[1].trim().split("=")[1];try{a=JSON.parse(a)}catch(e){console.log(e)}document.body.appendChild(o),o.setAttribute("style","display:none"),o.setAttribute("href",l),o.setAttribute("download",a),o.click(),URL.revokeObjectURL(l)}else swal("下载模板失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:o.b},{type:o.a},{type:l.c}]},e}()},"8uwf":function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=["form[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;float:left;width:100%;border:1px solid #dfdfdf;background:#fff;box-shadow:0 1px 7px rgba(0,0,0,.1)}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;position:relative}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#f44455;position:absolute;top:-5px;left:-5px}.map-container[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;top:0;left:0;text-align:center;background:rgba(0,0,0,.4);z-index:9999}.map-container[_ngcontent-%COMP%]   .map-wrap[_ngcontent-%COMP%]{padding:24px;background:#fff;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.map-container[_ngcontent-%COMP%]   .map-wrap[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:16px}#coordinate[_ngcontent-%COMP%]{height:360px;width:480px}"]},"9cYq":function(e,t,n){"use strict";function l(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var l=!0,o=e.component;if("upformdata"===t){l=!1!==o.saveData(n)&&l}return l},r.a,r.b)),a["ɵdid"](4833280,null,0,u.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function o(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"equipment-add",[],null,null,null,l,v)),a["ɵdid"](114688,null,0,i.a,[c.a,s.a,d.c,p.a],null,null)],function(e,t){e(t,1,0)},null)}var a=n("/oeL"),i=n("nLE0"),r=n("q9or"),u=n("X7i+"),c=n("U9zq"),s=n("0kYB"),d=n("BkNc"),p=n("ghHK");n.d(t,"a",function(){return g});var m=[],v=a["ɵcrt"]({encapsulation:2,styles:m,data:{}}),g=a["ɵccf"]("equipment-add",i.a,o,{},{},[])},"A+oa":function(e,t,n){"use strict";var l=n("BkNc"),o=n("bm2B"),a=n("+idH"),i=(n.n(a),n("IekC")),r=n("unDl");n.d(t,"a",function(){return u});var u=function(){function e(e,t,n,l,o){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=l,this.activatedRoute=o,this.oldParams=[],this.newparams={},this.changeparams=[],this.showchangeparams=!1}return e.prototype.ngOnInit=function(){var e=this;1!=this.dataService.getCookies("admin_flg")||0==this.coin_number&&0==this.card_money||(this.button={class:"btn-danger",content:"营业额清零",click:function(){e.fields[13].value=0,e.fields[14].value=0,e.coin_number=0,e.card_money=0,swal({title:"提示!",text:"营业额已清零,请重新提交配置",type:"success"})}}),this.activatedRoute.params.subscribe(function(t){e.device_no=t.id}),this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_device_params_list",{params:{device_no:t.id}})}).subscribe(function(t){if(t.status){var n=t.data;e.coin_number=n.turnover.coin_number,e.card_money=n.turnover.card_money,e.oldParams.push({key:"device_no",value:e.device_no,content:"设备编号"}),e.oldParams.push({key:"heartbeat_cycle",value:n.heartbeat_cycle,content:"心跳周期"}),e.oldParams.push({key:"server_port",value:"",content:"服务器端口"}),e.oldParams.push({key:"threshold",value:n.threshold,content:"连接信号阈值"}),e.oldParams.push({key:"electricity_meter_address",value:n.electricity_meter_address,content:"电表地址"}),e.oldParams.push({key:"card_deduction",value:n.modify_parameter.card_deduction,content:"刷卡扣费"}),e.oldParams.push({key:"card_time",value:n.modify_parameter.card_time,content:"刷卡时间"}),e.oldParams.push({key:"coin_time",value:n.modify_parameter.coin_time,content:"投币时间"}),e.oldParams.push({key:"standard_current",value:n.modify_parameter.standard_current,content:"标准电流"}),e.oldParams.push({key:"maxinum_current",value:n.modify_parameter.maxinum_current,content:"最大电流"}),e.oldParams.push({key:"delay",value:n.modify_parameter.delay,content:"拔断延时"}),e.oldParams.push({key:"set_the_time",value:"",content:"设备时钟"}),e.oldParams.push({key:"coin_number",value:n.turnover.coin_number,content:"投币次数"}),e.oldParams.push({key:"card_money",value:n.turnover.card_money,content:"刷卡金额"}),e.fields=[{title:"基本配置",label:"设备编号",key:"device_no",controlType:"input",inputType:"text",value:e.device_no,disabled:!0,placeholder:""},{label:"心跳周期(分钟)",key:"heartbeat_cycle",controlType:"input",inputType:"text",value:n.heartbeat_cycle,placeholder:"请输入心跳周期",validator:[o.Validators.pattern("^[0-9]*$"),a.CustomValidators.range([1,10])],errormsg:[{type:"range",content:"心跳周期范围:(1-10)分钟"},{type:"pattern",content:"心跳周期只能是整数"}]},{label:"服务器端口",key:"server_port",controlType:"input",inputType:"text",value:n.server_port,placeholder:"请输入服务器端口",validator:[o.Validators.pattern("^[0-9]*$"),a.CustomValidators.range([1024,65535])],errormsg:[{type:"range",content:"服务器端口范围:(1024-65535)"},{type:"pattern",content:"服务器端口只能是整数"}]},{label:"连接信号阈值",key:"threshold",controlType:"input",inputType:"text",value:n.threshold,placeholder:"请输入连接信号阈值",validator:[o.Validators.pattern("^[0-9]+.?[0-9]{0,2}$"),a.CustomValidators.range([0,20])],errormsg:[{type:"range",content:"连接信号阈值范围:(0-20)"},{type:"pattern",content:"连接信号阈值必需是数字；如：14.00"}]},{label:"现场信号强度",key:"signal_strength",controlType:"input",inputType:"text",value:n.signal_strength,disabled:!0,placeholder:"请输入连接信号阈值"},{label:"电表地址",key:"electricity_meter_address",controlType:"input",inputType:"text",value:n.electricity_meter_address,placeholder:"请输入12位电表地址",validator:[o.Validators.pattern("^[a-zA-Z0-9]{12}$")],errormsg:[{type:"pattern",content:"电表地址是12位数字或字母，不足12位前面补0；如：00as12344213"}]},{label:"刷卡扣费(元)",key:"card_deduction",controlType:"input",inputType:"text",value:n.modify_parameter.card_deduction,placeholder:"请输入一次刷卡扣费的金额",validator:[a.CustomValidators.range([.1,25.5]),o.Validators.pattern("^[0-9]+.?[0-9]{0,1}$")],errormsg:[{type:"range",content:"扣费金额范围:(0.1-25.5)"},{type:"pattern",content:"扣费金额只能是数字，保留两位有效数字；如：0.1"}]},{label:"刷卡时间(分钟)",key:"card_time",controlType:"input",inputType:"text",value:n.modify_parameter.card_time,placeholder:"请输入刷卡一次增加的时间",validator:[a.CustomValidators.range([10,2550]),r.a],errormsg:[{type:"range",content:"刷卡时间范围:(10-2550)分钟"},{type:"TenValidator",content:"刷卡时间范围只能是10的倍数"}]},{label:"投币时间(分钟)",key:"coin_time",controlType:"input",inputType:"text",value:n.modify_parameter.coin_time,placeholder:"请输入投币一次增加的时间",validator:[a.CustomValidators.range([10,2550]),r.a],errormsg:[{type:"range",content:"投币时间范围:(10-2550)分钟"},{type:"TenValidator",content:"投币时间范围只能是10的倍数"}]},{label:"标准电流(安培/A)",key:"standard_current",controlType:"input",inputType:"text",value:n.modify_parameter.standard_current,placeholder:"请输入标准电流",validator:[a.CustomValidators.range([.1,25.5]),o.Validators.pattern("^[0-9]+.?[0-9]{0,1}$")],errormsg:[{type:"range",content:"标准电流范围:(0.1-25.5)"},{type:"pattern",content:"标准电流只能是数字，保留一位有效数字；如：0.1A"}]},{label:"最大电流(安培/A)",key:"maxinum_current",controlType:"input",inputType:"text",value:n.modify_parameter.maxinum_current,placeholder:"请输入最大电流",validator:[a.CustomValidators.range([.1,25.5]),o.Validators.pattern("^[0-9]+.?[0-9]{0,1}$")],errormsg:[{type:"range",content:"最大电流范围:(0.1-25.5)"},{type:"pattern",content:"最大电流只能是数字，保留一位有效数字；如：0.1A"}]},{label:"拔断延时(秒)",key:"delay",controlType:"input",inputType:"text",value:n.modify_parameter.delay,placeholder:"请输入拔断延时",validator:[a.CustomValidators.range([0,255]),o.Validators.pattern("^[0-9]+$")],errormsg:[{type:"range",content:"拔断延时范围:(0-255)"},{type:"pattern",content:"拔断延时只能是数字；如：1秒"}]},{label:"设备时钟",key:"set_the_time",controlType:"time",value:"",config:{showTimePicker:!0,format:1},placeholder:"请点击选择日期"},{title:"营业额统计",label:"投币次数(次)",key:"coin_number",controlType:"input",inputType:"text",value:n.turnover.coin_number,disabled:!0,placeholder:""},{label:"刷卡金额(元)",key:"card_money",controlType:"input",inputType:"text",value:n.turnover.card_money,disabled:!0,placeholder:""}]}else swal({title:"获取设备参数配置失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.prototype.saveData=function(e){var t=(void 0===e?{value:t}:e).value;this.changeparams=[];var n=0;0!=this.coin_number&&0!=this.card_money||(n=1),this.newparams={device_no:this.device_no,heartbeat_cycle:t.heartbeat_cycle,server_port:t.server_port||"",threshold:t.threshold,electricity_meter_address:t.electricity_meter_address,card_deduction:t.card_deduction,card_time:t.card_time,coin_time:t.coin_time,standard_current:t.standard_current,maxinum_current:t.maxinum_current,delay:t.delay,set_the_time:t.set_the_time,coin_number:this.coin_number,card_money:this.card_money,empty_turnover:n};for(var l=0,o=this.oldParams;l<o.length;l++){var a=o[l];for(var i in this.newparams)a.key==i&&a.value!=this.newparams[i]&&(a.new_value=this.newparams[i],this.changeparams.push(a))}this.showchangeparams=!0},e.prototype.upParams=function(){var e=this;this.appHttpService.postData(this.uc.api.qc+"/set_device_params",{params:this.newparams}).subscribe(function(t){t.status?e.router.navigateByUrl("pages/equipment/equipmentList"):swal("修改参数配置失败",t.error_msg,"error")})},e.prototype.closeZoom=function(){this.showchangeparams=!1},e.ctorParameters=function(){return[{type:i.b},{type:i.a},{type:l.c},{type:i.c},{type:l.a}]},e}()},DyjH:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){function e(){}return e.prototype.ngOnInit=function(){},e.ctorParameters=function(){return[]},e}()},EKob:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=["form[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;float:left;width:100%;border:1px solid #dfdfdf;background:#fff;box-shadow:0 1px 7px rgba(0,0,0,.1)}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;position:relative}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#f44455;position:absolute;top:-5px;left:-5px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{min-width:110px}.main-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:-3px;padding:2px 6px 3px;border:1px solid silver;display:inline-block;cursor:pointer;background:#fff;border-radius:4px}.main-file[_ngcontent-%COMP%] > div.fileError[_ngcontent-%COMP%]{border-color:#f44455;box-shadow:inset 0 1px 1px rgba(0,0,0,.075)}.main-file[_ngcontent-%COMP%] > .progressBar[_ngcontent-%COMP%]{background:#6cc788;height:34px;margin-top:-34px;width:0;border-radius:.25rem;transition:width 1.8s linear}.main-file[_ngcontent-%COMP%] > .progressBar.fileError[_ngcontent-%COMP%]{transition:none}.main-file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:140px;height:88px;margin-top:8px;margin-right:8px;overflow:hidden}"]},FeAa:function(e,t,n){"use strict";var l=n("BkNc"),o=n("IekC");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.activatedRoute=n,this.plugins={table:{data:[]}}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.switchMap(function(t){return e.appHttpService.postData(e.uc.api.qc+"/get_device",{params:{device_id:t.id}})}).subscribe(function(t){if(t.status){var n=t.data,l="";n.province_code_name&&(l+=n.province_code_name),n.city_code_name&&(l+="-"+n.city_code_name),n.district_code_name&&(l+="-"+n.district_code_name),e.plugins.table.data=[{type:"text",label:"地区",content:l},{type:"text",label:"设备编号",content:n.device_no},{type:"text",label:"设备名称",content:n.device_name},{type:"text",label:"设备类型",content:n.device_type_name},{type:"text",label:"启用状态",content:1==n.status?"启用":"禁用"},{type:"text",label:"在线状态",content:n.net_status_name},{type:"text",label:"通讯方式",content:n.communicate_type_name},{type:"text",label:"固件版本",content:n.soft_ver},{type:"text",label:"设备详细地址",content:n.device_address},{type:"text",label:"设备所在小区名称",content:n.areas_name}],1==n.device_type&&e.appHttpService.postData(e.uc.api.qc+"/get_commodity_list/",{params:{page_now:1,limit:500,sort_by:"create_time",sort_type:"",search_by:{}}}).subscribe(function(t){if(t.status){for(var l=[],o=t.data.list,a=0;a<o.length;a++)for(var i=0;i<n.commodity_info.length;i++)o[a].commodity_id==n.commodity_info[i].commodity_id&&l.push(o[a].commodity_name);e.plugins.table.data.push({type:"text",label:"商品",content:l.join(",")})}})}else swal({title:"获取桩详情失败!",text:t.error_msg,type:"error",timer:"2000"})})},e.ctorParameters=function(){return[{type:o.a},{type:o.b},{type:l.a}]},e}()},GbvE:function(e,t,n){"use strict";function l(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var l=!0,o=e.component;if("pageBeChanged"===t){l=!1!==o.pageBeChanged(n)&&l}return l},r.a,r.b)),a["ɵdid"](114688,null,0,u.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){e(t,1,0,t.component.plugins.grid)},null)}function o(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"equipment-unbind",[],null,null,null,l,m)),a["ɵdid"](114688,null,0,i.a,[c.c,s.a,d.a],null,null)],function(e,t){e(t,1,0)},null)}var a=n("/oeL"),i=n("c4Ey"),r=n("tvCx"),u=n("sQer"),c=n("BkNc"),s=n("0kYB"),d=n("U9zq");n.d(t,"a",function(){return v});var p=[],m=a["ɵcrt"]({encapsulation:2,styles:p,data:{}}),v=a["ɵccf"]("equipment-unbind",i.a,o,{},{},[])},"H/dX":function(e,t,n){"use strict";function l(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"uc-search",[],null,null,null,i.a,i.b)),a["ɵdid"](638976,null,0,r.a,[],{searchData:[0,"searchData"],buttons:[1,"buttons"]},null),(e()(),a["ɵted"](null,["\n"])),(e()(),a["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var l=!0,o=e.component;if("pageBeChanged"===t){l=!1!==o.pageBeChanged(n)&&l}return l},c.a,c.b)),a["ɵdid"](114688,null,0,s.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"})],function(e,t){var n=t.component;e(t,1,0,n.plugins.search,n.plugins.buttons),e(t,4,0,n.plugins.grid)},null)}function o(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"equipment-onoff",[],null,null,null,l,g)),a["ɵdid"](114688,null,0,u.a,[d.c,p.a,m.a],null,null)],function(e,t){e(t,1,0)},null)}var a=n("/oeL"),i=n("gSne"),r=n("XGh0"),u=n("mVZ7"),c=n("tvCx"),s=n("sQer"),d=n("BkNc"),p=n("0kYB"),m=n("U9zq");n.d(t,"a",function(){return f});var v=[],g=a["ɵcrt"]({encapsulation:2,styles:v,data:{}}),f=a["ɵccf"]("equipment-onoff",u.a,o,{},{},[])},JsrN:function(e,t,n){"use strict";var l=n("BkNc"),o=n("IekC");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){this.appHttpService=e,this.uc=t,this.router=n,this.commoditys=[],this.cannotupdata=!1,this.now=1,this.grids={},this.deviceSet=new Set,this.commoditySet=[],this.commodityTip="",this.deviceTip="",this.plugins={},this.searchBy={bind_status:2,device_type:1},this.getCommodityData=function(){var e=this;this.appHttpService.postData(this.uc.api.qc+"/get_commodity_list",{params:{page_now:1,limit:2e5,sort_by:"create_time",sort_type:"desc",search_by:{status:1}}}).subscribe(function(t){if(t.status){for(var n=t.data,l=n.list,o=[],a=0,i=l;a<i.length;a++){var r=i[a];o.push({value:r.commodity_id,content:r.commodity_name,checked:!1})}e.commoditys=o,0==o.length?e.commodityTip="没有可添加的商品":e.commodityTip=""}else swal({title:"获取商品信息失败!",text:t.error_msg,type:"error",timer:"2000"})})},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_device_list",{params:e}).subscribe(function(e){if(e.status){var n=e.data,l=n.list;0==l.length?t.deviceTip="没有可添加的设备":t.deviceTip="",t.grids.tbody=[],t.grids.pagination.totalItems=n.total_num;for(var o=0,a=l;o<a.length;o++){var i=a[o],r=void 0;r=[{content:i.device_id,hidden:!0},{type:"checkbox",value:i.device_id},{content:i.device_no},{content:i.device_name},{content:i.device_name},{content:i.owner_name},{content:i.net_status_name},{content:"1"==i.status?"启用":"禁用"}],t.grids.tbody.push({array:r,checked:!1,click:function(e){e.checked=!e.checked,e.checked?t.deviceSet.add(e.array[1].value):t.deviceSet.delete(e.array[1].value)}})}}else swal({title:"获取设备信息失败!",text:e.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.getCommodityData(),this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:this.searchBy}),this.plugins.search=[{title:"设备编号",key:"device_no",controlType:"input",value:"",placeholder:"请输入设备编号"},{title:"所属商家",key:"owner_name",controlType:"input",value:"",placeholder:"请输入所属商家"}],this.plugins.buttons=[{type:"form",class:"btn-primary",content:"搜索",click:function(t){var n=(void 0===t?{value:n}:t).value,l=n.device_no,o=n.owner_name;e.searchBy={bind_status:2,device_type:1,device_no:l?l.trim():"",owner_name:o},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}},{type:"reset",class:"btn-danger",content:"重置",click:function(){e.searchBy={bind_status:2,device_type:1},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}}],this.grids={th:{array:[{content:"设备编号ID",hidden:!0},{type:"checkbox",content:"全选"},{content:"设备编号"},{content:"设备名称"},{content:"设备类型"},{content:"所属商家"},{content:"设备状态"},{content:"启用状态"}],checked:!1,click:function(t){if(t.th.checked)for(var n=0,l=t.tbody;n<l.length;n++){var o=l[n];o.checked=!1,e.deviceSet.clear()}else for(var a=0,i=t.tbody;a<i.length;a++){var o=i[a];o.checked=!0,e.deviceSet.add(o.array[1].value)}}},tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1}}},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:this.searchBy})},e.prototype.checkboxBack=function(e){this.commoditySet=e.value},e.prototype.updataform=function(){var e=this,t=this.commoditySet,n=Array.from(this.deviceSet);if(0==t.length)return void(this.commodityTip="请添加商品");if(this.commodityTip="",0==n.length)return void(this.deviceTip="请添加设备");this.deviceTip="";var l={params:{device_ids:n,commodity_ids:t}};this.appHttpService.postData(this.uc.api.qc+"/batch_set_device",l).subscribe(function(t){t.status?e.router.navigateByUrl("pages/equipment/equipmentList"):swal("批量设置失败",t.error_msg,"error")})},e.ctorParameters=function(){return[{type:o.a},{type:o.b},{type:l.c}]},e}()},Kc9m:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=[".zoom[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;top:0;left:0;text-align:center;background:rgba(0,0,0,.4);z-index:9999}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:264px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:inline-block;margin-top:16px}"]},NqZu:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=["form[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;float:left;width:100%;border:1px solid #dfdfdf;background:#fff;box-shadow:0 1px 7px rgba(0,0,0,.1)}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;position:relative}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{color:#f44455;position:absolute;top:-5px;left:-5px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > i[_ngcontent-%COMP%]{font-style:normal;color:#f44455}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{min-width:110px}"]},PlDs:function(e,t,n){"use strict";function l(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"uc-search",[],null,null,null,r.a,r.b)),i["ɵdid"](638976,null,0,u.a,[],{searchData:[0,"searchData"],buttons:[1,"buttons"]},null),(e()(),i["ɵted"](null,["\n\n"])),(e()(),i["ɵeld"](0,null,null,42,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;if("submit"===t){l=!1!==i["ɵnov"](e,5).onSubmit(n)&&l}if("reset"===t){l=!1!==i["ɵnov"](e,5).onReset()&&l}return l},null,null)),i["ɵdid"](16384,null,0,c["ɵbf"],[],null,null),i["ɵdid"](16384,[["form",4]],0,c.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,c.ControlContainer,null,[c.NgForm]),i["ɵdid"](16384,null,0,c.NgControlStatusGroup,[c.ControlContainer],null,null),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵeld"](0,null,null,14,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,7,"label",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["*"])),(e()(),i["ɵted"](null,["\n            全部商品\n            "])),(e()(),i["ɵeld"](0,null,null,1,"i",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["",""])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,1,"base-checkbox",[],null,[[null,"checkboxData"]],function(e,t,n){var l=!0,o=e.component;if("checkboxData"===t){l=!1!==o.checkboxBack(n)&&l}return l},d.a,d.b)),i["ɵdid"](901120,null,0,p.a,[],{model:[0,"model"]},{checkboxData:"checkboxData"}),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵeld"](0,null,null,13,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,7,"label",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["*"])),(e()(),i["ɵted"](null,["\n            全部设备\n            "])),(e()(),i["ɵeld"](0,null,null,1,"i",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["",""])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,1,"uc-table-checkbox",[],null,[[null,"pageBeChanged"]],function(e,t,n){var l=!0,o=e.component;if("pageBeChanged"===t){l=!1!==o.pageBeChanged(n)&&l}return l},m.a,m.b)),i["ɵdid"](114688,null,0,v.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"}),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵeld"](0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.updataform()&&l}return l},null,null)),(e()(),i["ɵted"](null,["提交"])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵted"](null,["\n"]))],function(e,t){var n=t.component;e(t,1,0,n.plugins.search,n.plugins.buttons),e(t,22,0,n.commoditys),e(t,37,0,n.grids)},function(e,t){var n=t.component;e(t,3,0,i["ɵnov"](t,7).ngClassUntouched,i["ɵnov"](t,7).ngClassTouched,i["ɵnov"](t,7).ngClassPristine,i["ɵnov"](t,7).ngClassDirty,i["ɵnov"](t,7).ngClassValid,i["ɵnov"](t,7).ngClassInvalid,i["ɵnov"](t,7).ngClassPending),e(t,17,0,n.commodityTip),e(t,33,0,n.deviceTip),e(t,42,0,n.cannotupdata)})}function o(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"equipmentBatchSet",[],null,null,null,l,h)),i["ɵdid"](114688,null,0,s.a,[g.a,f.a,_.c],null,null)],function(e,t){e(t,1,0)},null)}var a=n("NqZu"),i=n("/oeL"),r=n("gSne"),u=n("XGh0"),c=n("bm2B"),s=n("JsrN"),d=n("Gcma"),p=n("D1Si"),m=n("P1/+"),v=n("XRFD"),g=n("0kYB"),f=n("U9zq"),_=n("BkNc");n.d(t,"a",function(){return b});var y=[a.a],h=i["ɵcrt"]({encapsulation:0,styles:y,data:{}}),b=i["ɵccf"]("equipmentBatchSet",s.a,o,{},{},[])},Q8N0:function(e,t,n){"use strict";function l(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,10,"div",[["class","map-container"]],null,null,null,null,null)),(e()(),r["ɵted"](null,["\n    "])),(e()(),r["ɵeld"](0,null,null,7,"div",[["class","map-wrap"]],null,null,null,null,null)),(e()(),r["ɵted"](null,["\n        "])),(e()(),r["ɵeld"](0,null,null,1,"div",[["id","coordinate"]],null,null,null,null,null)),(e()(),r["ɵted"](null,["\n\n        "])),(e()(),r["ɵted"](null,["\n        "])),(e()(),r["ɵeld"](0,null,null,1,"button",[["class","btn btn-sm btn-success"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.confirmMap()&&l}return l},null,null)),(e()(),r["ɵted"](null,["确认位置和坐标"])),(e()(),r["ɵted"](null,["\n    "])),(e()(),r["ɵted"](null,["\n"]))],null,null)}function o(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var l=!0,o=e.component;if("upformdata"===t){l=!1!==o.saveData(n)&&l}return l},c.a,c.b)),r["ɵdid"](4833280,null,0,s.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"}),(e()(),r["ɵted"](null,["\n"])),(e()(),r["ɵand"](16777216,null,null,1,null,l)),r["ɵdid"](16384,null,0,d.m,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.fields),e(t,4,0,n.showMap)},null)}function a(e){return r["ɵvid"](0,[(e()(),r["ɵeld"](0,null,null,1,"equipmentinit-edit",[],null,null,null,o,f)),r["ɵdid"](114688,null,0,u.a,[p.a,m.a,v.c,v.a],null,null)],function(e,t){e(t,1,0)},null)}var i=n("8uwf"),r=n("/oeL"),u=n("0cWP"),c=n("q9or"),s=n("X7i+"),d=n("qbdv"),p=n("U9zq"),m=n("0kYB"),v=n("BkNc");n.d(t,"a",function(){return _});var g=[i.a],f=r["ɵcrt"]({encapsulation:0,styles:g,data:{}}),_=r["ɵccf"]("equipmentinit-edit",u.a,a,{},{},[])},SVTu:function(e,t,n){"use strict";var l=n("BkNc"),o=n("bm2B"),a=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,l){this.uc=e,this.appHttpService=t,this.activatedRoute=n,this.router=l,this.showForm=!1,this.showMap=!1,this.lnglat={lng:"",lat:""}}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe(function(t){t.id&&(e.showForm=!0,e.device_no=t.id,e.validateDevice())})},e.prototype.validateDevice=function(){var e=this,t={params:{device_no:this.device_no}};this.appHttpService.postData(this.uc.api.qc+"/validate_device_no",t).subscribe(function(t){if(t.status){e.showForm=!0;var n=t.data;e.device_no=n.device_no;var l=e.uc.BD09ToGCJ02(n.device_lat,n.device_lng);e.lnglat={lng:l.lon,lat:l.lat},e.fields=[{label:"设备编号",key:"device_no",controlType:"input",inputType:"text",require:!0,disabled:!0,value:n.device_no,placeholder:"请输入设备编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备名称",key:"device_name",controlType:"input",inputType:"text",require:!0,value:n.device_name,placeholder:"请输入设备名称",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"启用状态",key:"status",controlType:"radio",value:n.status||"1",require:!0,options:[{value:"1",content:"启用"},{value:"2",content:"禁用"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备类型",key:"device_type",controlType:"radio",value:n.device_type,require:!0,options:1==n.device_type?[{value:"1",content:"充电桩"}]:[{value:"2",content:"充值机"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"通讯方式",key:"communicate_type",controlType:"radio",value:n.communicate_type||"2",require:!0,options:null==n.communicate_type?[{value:"1",content:"wifi"},{value:"2",content:"gprs"}]:1==n.communicate_type?[{value:"1",content:"wifi"}]:[{value:"2",content:"gprs"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"固定版本",key:"soft_ver",controlType:"input",inputType:"text",require:!0,value:n.soft_ver,placeholder:"请输入固定版本",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"电表编号",key:"meters_no",controlType:"input",inputType:"text",require:!0,value:n.meters_no,placeholder:"请输入电表编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备所在地区",key:"business_address",controlType:"address",hasChildGroup:!0,require:!0,url:e.uc.api.qc+"/get_geo_list/",config:{province:{name:"province_code",value:n.province_code||"0",content:n.province_code_name||"",placeholder:"--请选择省--"},city:{name:"city_code",value:n.city_code||"0",content:n.city_code_name||"",placeholder:"--请选择市--"},area:{name:"district_code",value:n.district_code||"0",content:n.district_code_name||"",placeholder:"--请选择区--"}},validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备详细地址",key:"device_address",controlType:"input",inputType:"text",require:!0,button:{class:"btn-success",content:"经纬度拾取",click:function(t){var n=e.fields[7].config,l=e.fields[8];if(""==n.province.content&&""==n.city.content&&""==n.area.content)return void swal({title:"提示!",text:"请先选择设备所在地区",type:"error",timer:"2000"});if(""==l.value)return void swal({title:"提示!",text:"请先输入设备详细地址",type:"error",timer:"2000"});e.showMap=!0;var o=n.province.content+n.city.content+n.area.content+l.value;AMap.service("AMap.Geocoder",function(){(new AMap.Geocoder).getLocation(o,function(t,n){if("complete"===t&&"OK"===n.info){e.lnglat={lng:n.geocodes[0].location.lng,lat:n.geocodes[0].location.lat};var l=new AMap.Map("coordinate",{resizeEnable:!0,zoom:18,center:[n.geocodes[0].location.lng,n.geocodes[0].location.lat]}),o=new AMap.Marker({map:l,bubble:!0});AMap.event.addListener(l,"click",function(t){o.setPosition([t.lnglat.lng,t.lnglat.lat]),e.lnglat={lng:t.lnglat.lng,lat:t.lnglat.lat}})}else e.showMap=!1,swal({title:"提经纬度拾取失败示!",text:"请重置地区和设备详细地址",type:"error",timer:"2000"})})})}},value:n.device_address||"",placeholder:"请输入设备详细地址",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备所在小区名称",key:"areas_name",controlType:"input",inputType:"text",require:!0,value:n.areas_name||"",placeholder:"请输入设备所在小区名称",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"纬度",key:"device_lat",controlType:"input",inputType:"text",require:!0,disabled:!0,value:e.lnglat.lat||"",placeholder:"请使用坐标拾取工具获取纬度",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"经度",key:"device_lng",controlType:"input",inputType:"text",require:!0,disabled:!0,value:e.lnglat.lng||"",placeholder:"请使用坐标拾取工具获取经度",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}],1==n.device_type&&(e.fields.push({label:"商品选择",key:"commodity_ids",controlType:"checkbox",require:!0,value:"",options:"",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}),e.appHttpService.postData(e.uc.api.qc+"/get_commodity_list",{params:{page_now:1,limit:500,sort_by:"create_time",sort_type:"",search_by:{}}}).subscribe(function(t){if(t.status){for(var n=t.data.list,l=[],o=0,a=n;o<a.length;o++){var i=a[o];l.push({checked:!0,value:i.commodity_id,content:i.commodity_name})}e.fields[12].options=l}else swal({title:"获取商品失败!",text:t.error_msg,type:"error",timer:"2000"})}))}else swal("设备编号有效性验证失败",t.error_msg,"error")})},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,l=this.uc.GCJ02ToBD09(this.lnglat.lat,this.lnglat.lng),o=[];n.commodity_ids&&(o=JSON.parse(n.commodity_ids));var a={params:{device_info:{device_name:n.device_name.trim(),status:n.status,device_type:n.device_type,province_code:n.business_address.province_code,city_code:n.business_address.city_code,district_code:n.business_address.district_code,device_address:n.device_address,areas_name:n.areas_name,device_lat:l.lat,device_lng:l.lon,communicate_type:n.communicate_type,soft_ver:n.soft_ver,meters_no:n.meters_no},device_no:this.device_no,commodity_ids:o}};this.appHttpService.postData(this.uc.api.qc+"/device_binding",a).subscribe(function(e){e.status?t.router.navigateByUrl("pages/equipment/equipmentList"):swal("设备初始化失败",e.error_msg,"error")})},e.prototype.confirmMap=function(){this.fields[10].value=this.lnglat.lat,this.fields[11].value=this.lnglat.lng,this.showMap=!1},e.ctorParameters=function(){return[{type:a.b},{type:a.a},{type:l.a},{type:l.c}]},e}()},YPIP:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=[".zoom[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;top:0;left:0;background:rgba(0,0,0,.4);z-index:9999}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:500px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:#fff;padding:16px}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0;padding:10px 0;border-bottom:1px solid #ccc;margin-bottom:16px}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#f44455;text-align:center}.zoom[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{min-width:90px;display:inline-block}"]},bqmU:function(e,t,n){"use strict";function l(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),d["ɵted"](null,["\n    "])),(e()(),d["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,p.a,p.b)),d["ɵdid"](114688,null,0,m.a,[],{model:[0,"model"]},null),(e()(),d["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.button)},null)}function o(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,2,"li",[["style","border: none"]],null,null,null,null,null)),(e()(),d["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["没有参数酸味发生变化,无需修改"]))],null,null)}function a(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,2,"li",[["style","border: none"]],null,null,null,null,null)),(e()(),d["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["以下的参数配置项发生了变化"]))],null,null)}function i(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,10,"li",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["\n                "])),(e()(),d["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["","："])),(e()(),d["ɵted"](null,["\n                "])),(e()(),d["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["",""])),(e()(),d["ɵted"](null,["\n                "])),(e()(),d["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["修改为：",""])),(e()(),d["ɵted"](null,["\n            "]))],null,function(e,t){e(t,3,0,t.context.$implicit.content),e(t,6,0,t.context.$implicit.value),e(t,9,0,t.context.$implicit.new_value)})}function r(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,25,"div",[["class","zoom"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.closeZoom(n)&&l}return l},null,null)),(e()(),d["ɵted"](null,["\n    "])),(e()(),d["ɵeld"](0,null,null,22,"div",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["\n        "])),(e()(),d["ɵeld"](0,null,null,10,"ul",[],null,null,null,null,null)),(e()(),d["ɵted"](null,["\n            "])),(e()(),d["ɵand"](16777216,null,null,1,null,o)),d["ɵdid"](16384,null,0,v.m,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),d["ɵted"](null,["\n            "])),(e()(),d["ɵand"](16777216,null,null,1,null,a)),d["ɵdid"](16384,null,0,v.m,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),d["ɵted"](null,["\n            "])),(e()(),d["ɵand"](16777216,null,null,1,null,i)),d["ɵdid"](802816,null,0,v.l,[d.ViewContainerRef,d.TemplateRef,d.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),d["ɵted"](null,["\n        "])),(e()(),d["ɵted"](null,["\n        "])),(e()(),d["ɵeld"](0,null,null,7,"div",[["class","btn-group"]],null,null,null,null,null)),(e()(),d["ɵted"](null,["\n            "])),(e()(),d["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.upParams()&&l}return l},null,null)),(e()(),d["ɵted"](null,["确认修改"])),(e()(),d["ɵted"](null,["\n            "])),(e()(),d["ɵeld"](0,null,null,1,"button",[["class","btn btn-danger"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.closeZoom()&&l}return l},null,null)),(e()(),d["ɵted"](null,["取消"])),(e()(),d["ɵted"](null,["\n        "])),(e()(),d["ɵted"](null,["\n    "])),(e()(),d["ɵted"](null,["\n"]))],function(e,t){var n=t.component;e(t,7,0,0==n.changeparams.length),e(t,10,0,n.changeparams.length>0),e(t,13,0,n.changeparams)},function(e,t){e(t,18,0,0==t.component.changeparams.length)})}function u(e){return d["ɵvid"](0,[(e()(),d["ɵand"](16777216,null,null,1,null,l)),d["ɵdid"](16384,null,0,v.m,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),d["ɵted"](null,["\n"])),(e()(),d["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var l=!0,o=e.component;if("upformdata"===t){l=!1!==o.saveData(n)&&l}return l},f.a,f.b)),d["ɵdid"](4833280,null,0,_.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"}),(e()(),d["ɵted"](null,["\n"])),(e()(),d["ɵand"](16777216,null,null,1,null,r)),d["ɵdid"](16384,null,0,v.m,[d.ViewContainerRef,d.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.button),e(t,4,0,n.fields),e(t,7,0,n.showchangeparams)},null)}function c(e){return d["ɵvid"](0,[(e()(),d["ɵeld"](0,null,null,1,"equipmentConfig",[],null,null,null,u,w)),d["ɵdid"](114688,null,0,g.a,[y.a,h.a,b.c,C.a,b.a],null,null)],function(e,t){e(t,1,0)},null)}var s=n("YPIP"),d=n("/oeL"),p=n("VC1C"),m=n("7rGF"),v=n("qbdv"),g=n("A+oa"),f=n("q9or"),_=n("X7i+"),y=n("U9zq"),h=n("0kYB"),b=n("BkNc"),C=n("ghHK");n.d(t,"a",function(){return q});var k=[s.a],w=d["ɵcrt"]({encapsulation:0,styles:k,data:{}}),q=d["ɵccf"]("equipmentConfig",g.a,c,{},{},[])},c4Ey:function(e,t,n){"use strict";var l=n("IekC"),o=n("BkNc");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_device_list",{params:e}).subscribe(function(n){if(n.status){var l=n.data,o=l.list;t.plugins.grid.tbody=[],t.plugins.grid.pagination.totalItems=l.total_num;for(var a=0,i=o;a<i.length;a++){var r=i[a],u=void 0;u=[{content:r.device_id,hidden:!0},{content:r.device_no},{content:r.device_name},{content:"1"==r.device_type?"充电桩":"充值机"},{content:"1"==r.communicate_type?"wifi":"gprs"},{content:r.soft_ver},{content:r.meters_no}];var c=[];t.uc.powerfun(t.uc.constant.device_binding)&&c.push({content:"去绑定设备",class:"btn-primary",click:function(e){var n=e[1].content;t.router.navigate(["pages/equipment/equipmentInitAdd",n])}}),t.uc.powerfun(t.uc.constant.delete_device)&&c.push({content:"删除",class:"btn-danger",click:function(n){var l=n[0].content;swal({title:"确定删除?",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消",showLoaderOnConfirm:!0,confirmButtonColor:"#DD6B55"}).then(function(n){!0===n&&t.appHttpService.postData(t.uc.api.qc+"/delete_device/",{params:{device_id:l}}).subscribe(function(n){n.status?(swal({title:"删除成功!",text:"",type:"success",timer:"2000"}),t.getGridData(e)):swal("删除失败!",n.error_msg,"error")})},function(){})}}),u.push({type:"operation",operation:c}),t.plugins.grid.tbody.push(u)}}else swal({title:"获取设备信息失败!",text:n.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){this.plugins.grid={th:[{content:"设备编号ID",hidden:!0},{content:"设备编号"},{content:"设备名称"},{content:"设备类型"},{content:"通讯方式"},{content:"固定版本"},{content:"电表编号"},{content:"操作"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1}},this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{bind_status:"1"}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:{bind_status:1}})},e.ctorParameters=function(){return[{type:o.c},{type:l.a},{type:l.b}]},e}()},gRuT:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(){function e(){}return e}()},jC5N:function(e,t,n){"use strict";function l(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"uc-details",[],null,null,null,i.a,i.b)),a["ɵdid"](114688,null,0,r.a,[],{model:[0,"model"]},null)],function(e,t){e(t,1,0,t.component.plugins.table)},null)}function o(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"equipment-detail",[],null,null,null,l,m)),a["ɵdid"](114688,null,0,u.a,[c.a,s.a,d.a],null,null)],function(e,t){e(t,1,0)},null)}var a=n("/oeL"),i=n("DhbZ"),r=n("OkKd"),u=n("FeAa"),c=n("0kYB"),s=n("U9zq"),d=n("BkNc");n.d(t,"a",function(){return v});var p=[],m=a["ɵcrt"]({encapsulation:2,styles:p,data:{}}),v=a["ɵccf"]("equipment-detail",u.a,o,{},{},[])},"lO+L":function(e,t,n){"use strict";function l(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),a["ɵdid"](212992,null,0,i.y,[i.q,a.ViewContainerRef,a.ComponentFactoryResolver,[8,null],a.ChangeDetectorRef],null,null)],function(e,t){e(t,1,0)},null)}function o(e){return a["ɵvid"](0,[(e()(),a["ɵeld"](0,null,null,1,"equipment",[],null,null,null,l,c)),a["ɵdid"](114688,null,0,r.a,[],null,null)],function(e,t){e(t,1,0)},null)}var a=n("/oeL"),i=n("BkNc"),r=n("DyjH");n.d(t,"a",function(){return s});var u=[],c=a["ɵcrt"]({encapsulation:2,styles:u,data:{}}),s=a["ɵccf"]("equipment",r.a,o,{},{},[])},mLsC:function(e,t,n){"use strict";function l(e){return c["ɵvid"](0,[(e()(),c["ɵeld"](0,null,null,29,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;if("submit"===t){l=!1!==c["ɵnov"](e,2).onSubmit(n)&&l}if("reset"===t){l=!1!==c["ɵnov"](e,2).onReset()&&l}return l},null,null)),c["ɵdid"](16384,null,0,s["ɵbf"],[],null,null),c["ɵdid"](16384,[["form",4]],0,s.NgForm,[[8,null],[8,null]],null,null),c["ɵprd"](2048,null,s.ControlContainer,null,[s.NgForm]),c["ɵdid"](16384,null,0,s.NgControlStatusGroup,[s.ControlContainer],null,null),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵeld"](0,null,null,16,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n        "])),(e()(),c["ɵeld"](0,null,null,4,"label",[],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n            "])),(e()(),c["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),c["ɵted"](null,["*"])),(e()(),c["ɵted"](null,["\n            设备编号\n        "])),(e()(),c["ɵted"](null,["\n        "])),(e()(),c["ɵeld"](0,null,null,7,"input",[["autocomplete","off"],["class","form-control"],["name","device_no"],["placeholder","请输入设备编号"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var l=!0,o=e.component;if("input"===t){l=!1!==c["ɵnov"](e,15)._handleInput(n.target.value)&&l}if("blur"===t){l=!1!==c["ɵnov"](e,15).onTouched()&&l}if("compositionstart"===t){l=!1!==c["ɵnov"](e,15)._compositionStart()&&l}if("compositionend"===t){l=!1!==c["ɵnov"](e,15)._compositionEnd(n.target.value)&&l}if("ngModelChange"===t){l=!1!==(o.device_no=n)&&l}return l},null,null)),c["ɵdid"](16384,null,0,s.DefaultValueAccessor,[c.Renderer,c.ElementRef,[2,s.COMPOSITION_BUFFER_MODE]],null,null),c["ɵdid"](16384,null,0,s.RequiredValidator,[],{required:[0,"required"]},null),c["ɵprd"](1024,null,s.NG_VALIDATORS,function(e){return[e]},[s.RequiredValidator]),c["ɵprd"](1024,null,s.NG_VALUE_ACCESSOR,function(e){return[e]},[s.DefaultValueAccessor]),c["ɵdid"](671744,null,0,s.NgModel,[[2,s.ControlContainer],[2,s.NG_VALIDATORS],[8,null],[2,s.NG_VALUE_ACCESSOR]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),c["ɵprd"](2048,null,s.NgControl,null,[s.NgModel]),c["ɵdid"](16384,null,0,s.NgControlStatus,[s.NgControl],null,null),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵeld"](0,null,null,4,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n        "])),(e()(),c["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.validateDevice()&&l}return l},null,null)),(e()(),c["ɵted"](null,["有效性验证"])),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵted"](null,["\n"]))],function(e,t){var n=t.component;e(t,16,0,"");e(t,19,0,"device_no",n.device_no)},function(e,t){e(t,0,0,c["ɵnov"](t,4).ngClassUntouched,c["ɵnov"](t,4).ngClassTouched,c["ɵnov"](t,4).ngClassPristine,c["ɵnov"](t,4).ngClassDirty,c["ɵnov"](t,4).ngClassValid,c["ɵnov"](t,4).ngClassInvalid,c["ɵnov"](t,4).ngClassPending),e(t,14,0,c["ɵnov"](t,16).required?"":null,c["ɵnov"](t,21).ngClassUntouched,c["ɵnov"](t,21).ngClassTouched,c["ɵnov"](t,21).ngClassPristine,c["ɵnov"](t,21).ngClassDirty,c["ɵnov"](t,21).ngClassValid,c["ɵnov"](t,21).ngClassInvalid,c["ɵnov"](t,21).ngClassPending),e(t,26,0,!c["ɵnov"](t,2).form.valid)})}function o(e){return c["ɵvid"](0,[(e()(),c["ɵeld"](0,null,null,1,"uc-form",[],null,[[null,"upformdata"]],function(e,t,n){var l=!0,o=e.component;if("upformdata"===t){l=!1!==o.saveData(n)&&l}return l},d.a,d.b)),c["ɵdid"](4833280,null,0,p.a,[],{formData:[0,"formData"]},{upformdata:"upformdata"})],function(e,t){e(t,1,0,t.component.fields)},null)}function a(e){return c["ɵvid"](0,[(e()(),c["ɵeld"](0,null,null,10,"div",[["class","map-container"]],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵeld"](0,null,null,7,"div",[["class","map-wrap"]],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n        "])),(e()(),c["ɵeld"](0,null,null,1,"div",[["id","coordinate"]],null,null,null,null,null)),(e()(),c["ɵted"](null,["\n\n        "])),(e()(),c["ɵted"](null,["\n        "])),(e()(),c["ɵeld"](0,null,null,1,"button",[["class","btn btn-sm btn-success"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.confirmMap()&&l}return l},null,null)),(e()(),c["ɵted"](null,["确认位置和坐标"])),(e()(),c["ɵted"](null,["\n    "])),(e()(),c["ɵted"](null,["\n"]))],null,null)}function i(e){return c["ɵvid"](0,[(e()(),c["ɵand"](16777216,null,null,1,null,l)),c["ɵdid"](16384,null,0,m.m,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),c["ɵted"](null,["\n"])),(e()(),c["ɵand"](16777216,null,null,1,null,o)),c["ɵdid"](16384,null,0,m.m,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),c["ɵted"](null,["\n"])),(e()(),c["ɵand"](16777216,null,null,1,null,a)),c["ɵdid"](16384,null,0,m.m,[c.ViewContainerRef,c.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,!n.showForm),e(t,4,0,n.showForm),e(t,7,0,n.showMap)},null)}function r(e){return c["ɵvid"](0,[(e()(),c["ɵeld"](0,null,null,1,"equipmentinit-add",[],null,null,null,i,h)),c["ɵdid"](114688,null,0,v.a,[g.a,f.a,_.a,_.c],null,null)],function(e,t){e(t,1,0)},null)}var u=n("8uwf"),c=n("/oeL"),s=n("bm2B"),d=n("q9or"),p=n("X7i+"),m=n("qbdv"),v=n("SVTu"),g=n("U9zq"),f=n("0kYB"),_=n("BkNc");n.d(t,"a",function(){return b});var y=[u.a],h=c["ɵcrt"]({encapsulation:0,styles:y,data:{}}),b=c["ɵccf"]("equipmentinit-add",v.a,r,{},{},[])},mVZ7:function(e,t,n){"use strict";var l=n("IekC"),o=n("BkNc");n.d(t,"a",function(){return a});var a=function(){function e(e,t,n){this.router=e,this.appHttpService=t,this.uc=n,this.now=1,this.plugins={},this.searchBy={bind_status:2},this.getGridData=function(e){var t=this;this.appHttpService.postData(this.uc.api.qc+"/get_device_net_log_list",{params:e}).subscribe(function(e){if(e.status){var n=e.data,l=n.list;t.plugins.grid.tbody=[],t.plugins.grid.pagination.totalItems=n.total_num;for(var o=0,a=l;o<a.length;o++){var i=a[o],r=void 0;r=[{content:i.update_time?i.update_time:i.create_time},{content:i.device_no},{content:i.device_name},{content:"1"==i.net_status?"在线":"离线（"+i.online_duration+")"}],t.plugins.grid.tbody.push(r)}}else swal({title:"获取设备状态失败!",text:e.error_msg,type:"error",timer:"2000"})})}}return e.prototype.ngOnInit=function(){var e=this;this.plugins.grid={th:[{content:"操作时间"},{content:"设备编号"},{content:"设备名称"},{content:"设备状态"}],tbody:[],pagination:{maxSize:5,itemsPerPage:20,currentPage:1}},this.plugins.search=[{title:"设备编号",key:"device_no",controlType:"input",value:"",placeholder:"请输入设备编号"},{title:"设备状态",key:"net_status",controlType:"select",value:"0",placeholder:"请选择设备状态",options:[{name:"在线",geo_id:"1"},{name:"离线",geo_id:"2"}]}],this.plugins.buttons=[{type:"form",class:"btn-primary",content:"搜索",click:function(t){var n=(void 0===t?{value:n}:t).value,l=n.device_no,o=n.net_status;e.searchBy={bind_status:2,device_no:l?l.trim():"",net_status:o},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}},{type:"reset",class:"btn-danger",content:"重置",click:function(){e.searchBy={bind_status:2},e.now=1,e.getGridData({page_now:e.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:e.searchBy})}}],this.getGridData({page_now:this.now,limit:20,sort_by:"create_time",sort_type:"desc",search_by:{bind_status:"2"}})},e.prototype.pageBeChanged=function(e){this.getGridData({page_now:e.page,limit:e.itemsPerPage,sort_by:"create_time",sort_type:"desc",search_by:this.searchBy})},e.ctorParameters=function(){return[{type:o.c},{type:l.a},{type:l.b}]},e}()},nLE0:function(e,t,n){"use strict";var l=n("BkNc"),o=n("bm2B"),a=n("IekC");n.d(t,"a",function(){return i});var i=function(){function e(e,t,n,l){this.uc=e,this.appHttpService=t,this.router=n,this.dataService=l,this.fields=[{label:"设备编号",key:"device_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入设备编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备名称",key:"device_name",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入设备名称",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"设备类型",key:"device_type",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"充电桩"},{value:"2",content:"充值机"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"通讯方式",key:"communicate_type",controlType:"radio",value:"1",require:!0,options:[{value:"1",content:"wifi"},{value:"2",content:"gprs"}],validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"固定版本",key:"soft_ver",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入固定版本",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]},{label:"电表编号",key:"meters_no",controlType:"input",inputType:"text",value:"",require:!0,placeholder:"请输入电表编号",validator:[o.Validators.required],errormsg:[{type:"required",content:"必填项目"}]}]}return e.prototype.ngOnInit=function(){},e.prototype.saveData=function(e){var t=this,n=(void 0===e?{value:n}:e).value,l={params:{device_no:n.device_no.trim(),device_name:n.device_name.trim(),device_type:n.device_type,communicate_type:n.communicate_type,soft_ver:n.soft_ver,meters_no:n.meters_no}};this.appHttpService.postData(this.uc.api.qc+"/add_device",l).subscribe(function(e){e.status?t.router.navigateByUrl("pages/equipment/equipmentList"):swal("新增设备失败",e.error_msg,"error")})},e.ctorParameters=function(){return[{type:a.b},{type:a.a},{type:l.c},{type:a.c}]},e}()},rRgX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n("/oeL"),o=n("gRuT"),a=n("URzX"),i=n("lO+L"),r=n("tg5d"),u=n("jC5N"),c=n("GbvE"),s=n("H/dX"),d=n("mLsC"),p=n("9cYq"),m=n("Q8N0"),v=n("uoHi"),g=n("PlDs"),f=n("bqmU"),_=n("qbdv"),y=n("bm2B"),h=n("dWcS"),b=n("W5fO"),C=n("qCSQ"),k=n("BkNc"),w=n("eJnt"),q=n("X/HD"),x=n("0Zl/"),P=n("y8ct"),T=n("DyjH"),B=n("2gFL"),O=n("FeAa"),M=n("c4Ey"),D=n("mVZ7"),V=n("SVTu"),S=n("nLE0"),I=n("0cWP"),R=n("6Vbg"),N=n("JsrN"),L=n("A+oa");n.d(t,"EquipmentModuleNgFactory",function(){return z});var z=l["ɵcmf"](o.a,[],function(e){return l["ɵmod"]([l["ɵmpd"](512,l.ComponentFactoryResolver,l["ɵCodegenComponentFactoryResolver"],[[8,[a.a,i.a,r.a,u.a,c.a,s.a,d.a,p.a,m.a,v.a,g.a,f.a]],[3,l.ComponentFactoryResolver],l.NgModuleRef]),l["ɵmpd"](4608,_.a,_.b,[l.LOCALE_ID]),l["ɵmpd"](4608,y.FormBuilder,y.FormBuilder,[]),l["ɵmpd"](4608,y["ɵi"],y["ɵi"],[]),l["ɵmpd"](4608,h.a,h.a,[]),l["ɵmpd"](4608,b.a,b.a,[]),l["ɵmpd"](4608,C.a,C.a,[]),l["ɵmpd"](512,k.x,k.x,[[2,k.m],[2,k.c]]),l["ɵmpd"](512,_.c,_.c,[]),l["ɵmpd"](512,y["ɵba"],y["ɵba"],[]),l["ɵmpd"](512,y.ReactiveFormsModule,y.ReactiveFormsModule,[]),l["ɵmpd"](512,w.a,w.a,[]),l["ɵmpd"](512,y.FormsModule,y.FormsModule,[]),l["ɵmpd"](512,q.a,q.a,[]),l["ɵmpd"](512,x.a,x.a,[]),l["ɵmpd"](512,P.a,P.a,[]),l["ɵmpd"](512,o.a,o.a,[]),l["ɵmpd"](1024,k.t,function(){return[[{path:"",component:T.a,children:[{path:"",redirectTo:"equipmentList",pathMatch:"full"},{path:"equipmentList",component:B.a},{path:"equipmentDetail/:id",component:O.a},{path:"equipmentUnbind",component:M.a},{path:"equipmentOnOffRecord",component:D.a},{path:"equipmentInitAdd",component:V.a},{path:"equipmentInitAdd/:id",component:V.a},{path:"equipmentAdd",component:S.a},{path:"equipmentInitEdit/:id",component:I.a},{path:"equipmentImport",component:R.a},{path:"equipmentBatchSet",component:N.a},{path:"equipmentConfig/:id",component:L.a}]}]]},[])])})},tg5d:function(e,t,n){"use strict";function l(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,4,null,null,null,null,null,null,null)),(e()(),u["ɵted"](null,["\n    "])),(e()(),u["ɵeld"](0,null,null,1,"uc-button",[],null,null,null,c.a,c.b)),u["ɵdid"](114688,null,0,s.a,[],{model:[0,"model"]},null),(e()(),u["ɵted"](null,["\n"]))],function(e,t){e(t,3,0,t.component.plugins.button)},null)}function o(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,9,"div",[["class","zoom"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.closeZoom(n)&&l}return l},null,null)),(e()(),u["ɵted"](null,["\n    "])),(e()(),u["ɵeld"](0,null,null,6,"div",[],null,null,null,null,null)),(e()(),u["ɵted"](null,["\n        "])),(e()(),u["ɵeld"](0,null,null,0,"img",[["alt",""]],[[8,"src",4]],null,null,null,null)),(e()(),u["ɵted"](null,["\n        "])),(e()(),u["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.downloadimg()&&l}return l},null,null)),(e()(),u["ɵted"](null,["下载"])),(e()(),u["ɵted"](null,["\n    "])),(e()(),u["ɵted"](null,["\n"]))],null,function(e,t){var n=t.component;e(t,4,0,u["ɵinlineInterpolate"](1,"",n.zoomInfo.src,""))})}function a(e){return u["ɵvid"](0,[(e()(),u["ɵand"](16777216,null,null,1,null,l)),u["ɵdid"](16384,null,0,d.m,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵeld"](0,null,null,1,"uc-search",[],null,null,null,p.a,p.b)),u["ɵdid"](638976,null,0,m.a,[],{searchData:[0,"searchData"],buttons:[1,"buttons"]},null),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵeld"](0,null,null,1,"uc-table",[],null,[[null,"pageBeChanged"]],function(e,t,n){var l=!0,o=e.component;if("pageBeChanged"===t){l=!1!==o.pageBeChanged(n)&&l}return l},g.a,g.b)),u["ɵdid"](114688,null,0,f.a,[],{model:[0,"model"]},{pageBeChanged:"pageBeChanged"}),(e()(),u["ɵted"](null,["\n"])),(e()(),u["ɵand"](16777216,null,null,1,null,o)),u["ɵdid"](16384,null,0,d.m,[u.ViewContainerRef,u.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,1,0,n.plugins.button),e(t,4,0,n.plugins.search,n.plugins.buttons),e(t,7,0,n.plugins.grid),e(t,10,0,n.zoomInfo.show)},null)}function i(e){return u["ɵvid"](0,[(e()(),u["ɵeld"](0,null,null,1,"equipmentList",[],null,null,null,a,C)),u["ɵdid"](114688,null,0,v.a,[_.c,y.a,h.a],null,null)],function(e,t){e(t,1,0)},null)}var r=n("Kc9m"),u=n("/oeL"),c=n("VC1C"),s=n("7rGF"),d=n("qbdv"),p=n("gSne"),m=n("XGh0"),v=n("2gFL"),g=n("tvCx"),f=n("sQer"),_=n("BkNc"),y=n("0kYB"),h=n("U9zq");n.d(t,"a",function(){return k});var b=[r.a],C=u["ɵcrt"]({encapsulation:0,styles:b,data:{}}),k=u["ɵccf"]("equipmentList",v.a,i,{},{},[])},uoHi:function(e,t,n){"use strict";function l(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,46,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var l=!0;if("submit"===t){l=!1!==i["ɵnov"](e,2).onSubmit(n)&&l}if("reset"===t){l=!1!==i["ɵnov"](e,2).onReset()&&l}return l},null,null)),i["ɵdid"](16384,null,0,r["ɵbf"],[],null,null),i["ɵdid"](16384,[["form",4]],0,r.NgForm,[[8,null],[8,null]],null,null),i["ɵprd"](2048,null,r.ControlContainer,null,[r.NgForm]),i["ɵdid"](16384,null,0,r.NgControlStatusGroup,[r.ControlContainer],null,null),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵeld"](0,null,null,30,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,4,"label",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["ɵted"](null,["*"])),(e()(),i["ɵted"](null,["\n            未绑定设备的批量上传\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,5,"div",[],[[4,"display",null]],null,null,null,null)),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,2,"input",[["class","form-control"],["type","file"]],[[8,"id",0],[8,"accept",0]],[[null,"change"]],function(e,t,n){var l=!0,o=e.component;if("change"===t){l=!1!==o.canup(n)&&l}return l},null,null)),i["ɵdid"](278528,null,0,c.k,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](["fileError"]),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,13,"div",[["class","main-file"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,6,"div",[["class","form-control"]],null,null,null,null,null)),i["ɵdid"](278528,null,0,c.k,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](["fileError"]),(e()(),i["ɵted"](null,["\n                "])),(e()(),i["ɵeld"](0,null,null,1,"span",[],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.selectFile()&&l}return l},null,null)),(e()(),i["ɵted"](null,["选择文件"])),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵted"](null,["\n            "])),(e()(),i["ɵeld"](0,null,null,2,"div",[["class","progressBar"]],[[4,"width",null]],null,null,null,null)),i["ɵdid"](278528,null,0,c.k,[i.IterableDiffers,i.KeyValueDiffers,i.ElementRef,i.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),i["ɵpod"](["fileError"]),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵeld"](0,null,null,7,"div",[["class","form-group"]],null,null,null,null,null)),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.uploadTemplate()&&l}return l},null,null)),(e()(),i["ɵted"](null,["上传"])),(e()(),i["ɵted"](null,["\n        "])),(e()(),i["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var l=!0,o=e.component;if("click"===t){l=!1!==o.downloadTemplate()&&l}return l},null,null)),(e()(),i["ɵted"](null,["下载模板"])),(e()(),i["ɵted"](null,["\n    "])),(e()(),i["ɵted"](null,["\n"]))],function(e,t){var n=t.component;e(t,18,0,"form-control",e(t,19,0,n.fileError));e(t,25,0,"form-control",e(t,26,0,n.fileError));e(t,33,0,"progressBar",e(t,34,0,n.fileError))},function(e,t){var n=t.component;e(t,0,0,i["ɵnov"](t,4).ngClassUntouched,i["ɵnov"](t,4).ngClassTouched,i["ɵnov"](t,4).ngClassPristine,i["ɵnov"](t,4).ngClassDirty,i["ɵnov"](t,4).ngClassValid,i["ɵnov"](t,4).ngClassInvalid,i["ɵnov"](t,4).ngClassPending);e(t,15,0,"none"),e(t,17,0,i["ɵinlineInterpolate"](1,"",n.id,""),n.accept),e(t,32,0,n.progressBar+"%"),e(t,40,0,n.cannotupload)})}function o(e){return i["ɵvid"](0,[(e()(),i["ɵeld"](0,null,null,1,"equipmentImport",[],null,null,null,l,v)),i["ɵdid"](114688,null,0,u.a,[s.a,d.a,p.c],null,null)],function(e,t){e(t,1,0)},null)}var a=n("EKob"),i=n("/oeL"),r=n("bm2B"),u=n("6Vbg"),c=n("qbdv"),s=n("U9zq"),d=n("0kYB"),p=n("BkNc");n.d(t,"a",function(){return g});var m=[a.a],v=i["ɵcrt"]({encapsulation:0,styles:m,data:{}}),g=i["ɵccf"]("equipmentImport",u.a,o,{},{},[])}});